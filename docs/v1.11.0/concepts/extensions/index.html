<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Project Gardener Website - A Managed Kubernetes Service Done Right"><meta name=copyright content="Copyright 2019 Gardener project authors."><meta name=google-site-verification content="9EoGiMwk2aq0E_tVh16iJgJbp7fbyqkfWH9b5sGybl0"><title>Extensions :: Gardener</title><link rel=icon type=image/x-icon href=https://gardener.cloud/images/favicon.ico><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-16x16.png sizes=16x16><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-W2FGNSX');</script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-165447164-1');</script><link href=/css/nucleus.css?1605193822 rel=stylesheet><link href=/css/font-awesome.min.css?1605193822 rel=stylesheet><link href=/css/hybrid.css?1605193822 rel=stylesheet><link href=/css/featherlight.min.css?1605193822 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1605193822 rel=stylesheet><link href=/css/auto-complete.css?1605193822 rel=stylesheet><link href=/css/skeleton.css?1605193822 rel=stylesheet><link href=/css/sheetslider.css?1605193822 rel=stylesheet><link rel=stylesheet href=/css/gardener.e2ca9959244349715932e2bbb82ec914af6743c4148bb41946b0aea714f04a0d.css><script src=/js/moment.js?1605193822></script><script src=/js/vivus.js?1605193822></script><script src=/js/scrollreveal.js?1605193822></script><script src=/js/inlineSVG.js?1605193822></script><script src=/js/jquery.min.js?1605193822></script><script src=/js/fixed.js?1605193822></script><script src=/js/clipboard.min.js?1605193822></script><script src=https://platform.linkedin.com/in.js type=text/javascript>lang:en_US</script></head><body data-url=/v1.11.0/concepts/extensions/ class=has-sticky-navigation><script>$(document).ready(function(){function initStickyNav(){var stickyPoint;var tln=document.querySelector(".tln");if(!tln){return;}
var stickyPointEl=document.querySelector(".sticky-nav-point");if(stickyPointEl==null){stickyPointEl=document.querySelector("body");stickyPoint=0;}else{stickyPoint=stickyPointEl.clientHeight+stickyPointEl.offsetTop;}
var bodySelector=document.getElementsByTagName("body")[0];var tlnHeight=tln.clientHeight;var stickyNavigation=function(){if(window.pageYOffset+tlnHeight>=stickyPoint){bodySelector.classList.add("has-sticky-navigation");tln.classList.add("sticky-top");}else{bodySelector.classList.remove("has-sticky-navigation");tln.classList.remove("sticky-top");}}
window.onscroll=function(){stickyNavigation();};}
initStickyNav();function closeAllSelect(){document.getElementById("docOptions").classList.remove("show");}
function show(e){e.stopPropagation();document.getElementById("docOptions").classList.add("show");}
document.addEventListener("click",closeAllSelect);document.getElementById("docSelector").addEventListener("click",show);});</script><div class="tln fixedsticky sticky-top"><header class=navigation><div class=container><div class=navigation-wrapper><a href=/ class=logo><img src=/images/logo.svg>
<span class=title>Gardener</span></a>
<a class="nav-button navbar-toggler" href=#><i class="fa fa-bars"></i></a><div class=navbar-collapse><ul class=links><li class=link><a href=/blog/>Blogs</a></li><li class=link><a href=/community/>Community</a></li><li class=link><a href=/adopter/>Adopters</a></li><li class="link has-child active"><a id=docSelector>Documentation v1.11.0</a><div id=docOptions class=doc-options><ul><li><a href=/documentation/concepts/extensions/>Documentation
v1.12.2</a></li><li><a href=/v1.11.0/home class=activeVersion>Documentation
v1.11.0</a></li><li><a href=/v1.10.0/concepts/extensions/>Documentation
v1.10.0</a></li></ul></div></li></ul></div></div></div></header></div><script>$(".navigation .navbar-toggler").click(function(evt){$(".navigation .navbar-collapse").toggle();$(".navigation").toggleClass("collapsed");$(".navigation .search-box").toggle();})</script><style>#docSelector{cursor:pointer}.doc-options{position:fixed;background-color:#0b8062;text-align:left;display:none}.doc-options ul li{margin-bottom:0}.doc-options ul li a:hover{background-color:#0c694f}.doc-options ul{list-style:none;padding:0;margin:0;text-align:left}.doc-options ul li a{padding:10px;margin:0}.doc-options .activeVersion{background-color:#ec682a}.show{display:block}</style><div class=sln><div class=overlay-band><ul class="nav-list container"><li title=Home><a class=navbar-link href=/v1.11.0/home/>Home</a></li><li title=Concepts><a class="navbar-link is-active" href=/v1.11.0/concepts/>Concepts</a></li><li title="How-To Guides"><a class=navbar-link href=/v1.11.0/guides/>How-To Guides</a></li><li title=Tutorials><a class=navbar-link href=/v1.11.0/tutorials/>Tutorials</a></li><li title="API Reference"><a class=navbar-link href=/v1.11.0/references/>API Reference</a></li><li title=Contribute><a class=navbar-link href=/v1.11.0/contribute/>Contribute</a></li></ul></div></div><div class="main container"><nav id=sidebar class="collapsed container menu"><div class=highlightable><ul class=topics><li data-nav-id=/v1.11.0/concepts/ title=Concepts class="dd-item parent root collapsible" data-depth=0><a href=/v1.11.0/concepts/><span class=menu-item-text>Concepts</span></a><ul><li data-nav-id=/v1.11.0/concepts/core-components/ title="Core Components" class="dd-item top-level collapsible collapsed" data-depth=1><a href=/documentation/concepts/core-components/api-server><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Core Components</span></a><ul><li data-nav-id=/v1.11.0/concepts/core-components/api-server/ title="Gardener API Server" class="dd-item collapsible collapsed" data-depth=2><a href=/v1.11.0/concepts/core-components/api-server/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Gardener API Server</span></a><ul><li data-nav-id=/v1.11.0/concepts/core-components/api-server/admission-plugins/ title="In-Tree Admission Plugins" class=dd-item data-depth=3><a href=/v1.11.0/concepts/core-components/api-server/admission-plugins/><span class=toggle></span><span class=menu-item-text></span>In-Tree Admission Plugins</span></a></a></li></ul></li><li data-nav-id=/v1.11.0/concepts/core-components/scheduler/ title="Gardener Scheduler" class=dd-item data-depth=2><a href=/v1.11.0/concepts/core-components/scheduler/><span class=toggle></span><span class=menu-item-text></span>Gardener Scheduler</span></a></a></li><li data-nav-id=/v1.11.0/concepts/core-components/seed-admission-ctrl/ title="Gardener Seed Admission Controller" class=dd-item data-depth=2><a href=/v1.11.0/concepts/core-components/seed-admission-ctrl/><span class=toggle></span><span class=menu-item-text></span>Gardener Seed Admission Controller</span></a></a></li><li data-nav-id=/v1.11.0/concepts/core-components/gardenlet/ title=gardenlet class=dd-item data-depth=2><a href=/v1.11.0/concepts/core-components/gardenlet/><span class=toggle></span><span class=menu-item-text></span>gardenlet</span></a></a></li></ul></li><li data-nav-id=/v1.11.0/concepts/backup-restore/ title="Backup and Restore" class="dd-item top-level" data-depth=1><a href=/v1.11.0/concepts/backup-restore/><span class=toggle></span><span class=menu-item-text>Backup and Restore</span></a></li><li data-nav-id=/v1.11.0/concepts/extensions/ title=Extensions class="dd-item parent active top-level collapsible" data-depth=1><a href=/v1.11.0/concepts/extensions/><span class="toggle fa fa-angle-down"></span><span class=menu-item-text>Extensions</span></a><ul><li data-nav-id=/v1.11.0/concepts/extensions/backupbucket/ title="BackupBucket resource" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/backupbucket/><span class=toggle></span><span class=menu-item-text></span>BackupBucket resource</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/backupentry/ title="BackupEntry resource" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/backupentry/><span class=toggle></span><span class=menu-item-text></span>BackupEntry resource</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/cluster/ title="Cluster resource" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/cluster/><span class=toggle></span><span class=menu-item-text></span>Cluster resource</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/shoot-health-status-conditions/ title="Contributing to shoot health status conditions" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/shoot-health-status-conditions/><span class=toggle></span><span class=menu-item-text></span>Contributing to shoot health status conditions</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/controlplane-webhooks/ title="Controlplane customization webhooks" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/controlplane-webhooks/><span class=toggle></span><span class=menu-item-text></span>Controlplane customization webhooks</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/controlplane/ title="ControlPlane resource" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/controlplane/><span class=toggle></span><span class=menu-item-text></span>ControlPlane resource</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/controlplane-exposure/ title="ControlPlane resource with purpose exposure" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/controlplane-exposure/><span class=toggle></span><span class=menu-item-text></span>ControlPlane resource with purpose exposure</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/dns/ title="DNSProvider and DNSEntry resources" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/dns/><span class=toggle></span><span class=menu-item-text></span>DNSProvider and DNSEntry resources</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/project-roles/ title="Extending project roles" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/project-roles/><span class=toggle></span><span class=menu-item-text></span>Extending project roles</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/overview/ title="Extensibility overview" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/overview/><span class=toggle></span><span class=menu-item-text></span>Extensibility overview</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/extension/ title="Extension resource" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/extension/><span class=toggle></span><span class=menu-item-text></span>Extension resource</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/containerruntime/ title="Gardener Container Runtime Extension" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/containerruntime/><span class=toggle></span><span class=menu-item-text></span>Gardener Container Runtime Extension</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/network/ title="Gardener Network Extension" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/network/><span class=toggle></span><span class=menu-item-text></span>Gardener Network Extension</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/conventions/ title="General conventions" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/conventions/><span class=toggle></span><span class=menu-item-text></span>General conventions</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/healthcheck-library/ title="Health Check Library" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/healthcheck-library/><span class=toggle></span><span class=menu-item-text></span>Health Check Library</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/infrastructure/ title="Infrastructure resource" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/infrastructure/><span class=toggle></span><span class=menu-item-text></span>Infrastructure resource</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/logging-and-monitoring/ title="Logging and Monitoring for Extensions" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/logging-and-monitoring/><span class=toggle></span><span class=menu-item-text></span>Logging and Monitoring for Extensions</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/operatingsystemconfig/ title="OperatingSystemConfig resource" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/operatingsystemconfig/><span class=toggle></span><span class=menu-item-text></span>OperatingSystemConfig resource</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/referenced-resources/ title="Referenced Resources" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/referenced-resources/><span class=toggle></span><span class=menu-item-text></span>Referenced Resources</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/controllerregistration/ title="Registering Extension Controllers" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/controllerregistration/><span class=toggle></span><span class=menu-item-text></span>Registering Extension Controllers</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/shoot-maintenance/ title="Shoot maintenance" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/shoot-maintenance/><span class=toggle></span><span class=menu-item-text></span>Shoot maintenance</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/shoot-webhooks/ title="Shoot resource customization webhooks" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/shoot-webhooks/><span class=toggle></span><span class=menu-item-text></span>Shoot resource customization webhooks</span></a></a></li><li data-nav-id=/v1.11.0/concepts/extensions/worker/ title="Worker resource" class=dd-item data-depth=2><a href=/v1.11.0/concepts/extensions/worker/><span class=toggle></span><span class=menu-item-text></span>Worker resource</span></a></a></li></ul></li><li data-nav-id=/v1.11.0/concepts/networking/ title=Networking class="dd-item top-level collapsible collapsed" data-depth=1><a href=/v1.11.0/concepts/networking/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Networking</span></a><ul><li data-nav-id=/v1.11.0/concepts/networking/dns-managment/ title="DNS Management" class=dd-item data-depth=2><a href=/v1.11.0/concepts/networking/dns-managment/><span class=toggle></span><span class=menu-item-text></span>DNS Management</span></a></a></li><li data-nav-id=/v1.11.0/concepts/networking/cert-managment/ title="Certificates Management" class=dd-item data-depth=2><a href=/v1.11.0/concepts/networking/cert-managment/><span class=toggle></span><span class=menu-item-text></span>Certificates Management</span></a></a></li><li data-nav-id=/v1.11.0/concepts/networking/networking-policies/ title="Network Policies" class=dd-item data-depth=2><a href=/v1.11.0/concepts/networking/networking-policies/><span class=toggle></span><span class=menu-item-text></span>Network Policies</span></a></a></li></ul></li><li data-nav-id=/v1.11.0/concepts/monitoring/ title=Monitoring class="dd-item top-level collapsible collapsed" data-depth=1><a href=/v1.11.0/concepts/monitoring/><span class="toggle fa fa-angle-right"></span><span class=menu-item-text>Monitoring</span></a><ul><li data-nav-id=/v1.11.0/concepts/monitoring/alerting/ title=Alerting class=dd-item data-depth=2><a href=/v1.11.0/concepts/monitoring/alerting/><span class=toggle></span><span class=menu-item-text></span>Alerting</span></a></a></li><li data-nav-id=/v1.11.0/concepts/monitoring/extending/ title="Extending the Monitoring Stack" class=dd-item data-depth=2><a href=/v1.11.0/concepts/monitoring/extending/><span class=toggle></span><span class=menu-item-text></span>Extending the Monitoring Stack</span></a></a></li><li data-nav-id=/v1.11.0/concepts/monitoring/operator-alerts/ title="Operator Alerts" class=dd-item data-depth=2><a href=/v1.11.0/concepts/monitoring/operator-alerts/><span class=toggle></span><span class=menu-item-text></span>Operator Alerts</span></a></a></li><li data-nav-id=/v1.11.0/concepts/monitoring/user_alerts/ title="User Alerts" class=dd-item data-depth=2><a href=/v1.11.0/concepts/monitoring/user_alerts/><span class=toggle></span><span class=menu-item-text></span>User Alerts</span></a></a></li></ul></li><li data-nav-id=/v1.11.0/concepts/deployment/deploy_gardenlet_automatically/ title="Automatic Deployment of Gardenlets" class="dd-item top-level" data-depth=1><a href=/v1.11.0/concepts/deployment/deploy_gardenlet_automatically/><span class=toggle></span><span class=menu-item-text></span>Automatic Deployment of Gardenlets</span></a></a></li><li data-nav-id=/components/bouquet/ title=Bouquet class="dd-item top-level" data-depth=1><a href=/components/bouquet/><span class=toggle></span><span class=menu-item-text></span>Bouquet</span></a></a></li><li data-nav-id=/components/dashboard/ title=Dashboard class="dd-item top-level" data-depth=1><a href=/components/dashboard/><span class=toggle></span><span class=menu-item-text></span>Dashboard</span></a></a></li><li data-nav-id=/v1.11.0/concepts/deployment/deploy_gardenlet_manually/ title="Deploy a Gardenlet Manually" class="dd-item top-level" data-depth=1><a href=/v1.11.0/concepts/deployment/deploy_gardenlet_manually/><span class=toggle></span><span class=menu-item-text></span>Deploy a Gardenlet Manually</span></a></a></li><li data-nav-id=/v1.11.0/concepts/deployment/deploy_gardenlet/ title="Deploying Gardenlets" class="dd-item top-level" data-depth=1><a href=/v1.11.0/concepts/deployment/deploy_gardenlet/><span class=toggle></span><span class=menu-item-text></span>Deploying Gardenlets</span></a></a></li><li data-nav-id=/v1.11.0/concepts/deployment/setup_gardener/ title="Deploying the Gardener into a Kubernetes cluster" class="dd-item top-level" data-depth=1><a href=/v1.11.0/concepts/deployment/setup_gardener/><span class=toggle></span><span class=menu-item-text></span>Deploying the Gardener into a Kubernetes cluster</span></a></a></li><li data-nav-id=/v1.11.0/concepts/deployment/ask/ title="Deploying the previous Gardener versions and a Seed into an AKS cluster" class="dd-item top-level" data-depth=1><a href=/v1.11.0/concepts/deployment/ask/><span class=toggle></span><span class=menu-item-text></span>Deploying the previous Gardener versions and a Seed into an AKS cluster</span></a></a></li><li data-nav-id=/v1.11.0/concepts/deployment/feature_gates/ title="Feature Gates" class="dd-item top-level" data-depth=1><a href=/v1.11.0/concepts/deployment/feature_gates/><span class=toggle></span><span class=menu-item-text></span>Feature Gates</span></a></a></li><li data-nav-id=/components/gardenctl/ title=gardenctl class="dd-item top-level" data-depth=1><a href=/components/gardenctl/><span class=toggle></span><span class=menu-item-text></span>gardenctl</span></a></a></li><li data-nav-id=/components/gardener/ title=Gardener class="dd-item top-level" data-depth=1><a href=/components/gardener/><span class=toggle></span><span class=menu-item-text></span>Gardener</span></a></a></li><li data-nav-id=/v1.11.0/concepts/deployment/image_vector/ title="Image Vector" class="dd-item top-level" data-depth=1><a href=/v1.11.0/concepts/deployment/image_vector/><span class=toggle></span><span class=menu-item-text></span>Image Vector</span></a></a></li><li data-nav-id=/components/kubify/ title=kubify class="dd-item top-level" data-depth=1><a href=/components/kubify/><span class=toggle></span><span class=menu-item-text></span>kubify</span></a></a></li><li data-nav-id=/v1.11.0/concepts/mcm/ title="Machine Controller Manager" class="dd-item top-level" data-depth=1><a href=/v1.11.0/concepts/mcm/><span class=toggle></span><span class=menu-item-text></span>Machine Controller Manager</span></a></a></li></ul></li></ul></div></nav><a href=# class=menu-toggler><i class="fa fa-angle-double-left"></i></a><script>$(document).ready(function(){$("#sidebar .dd-item:not(.top-level):not(.parent)").hide();$("#sidebar .dd-item.parent").siblings(".dd-item").show();$('.dd-item',"#sidebar .dd-item.parent").show();$(".menu-toggler").click(function(evt){$("#sidebar").toggleClass("collapsed");$(".menu-toggler span").toggleClass("fa-angle-double-left");$(".menu-toggler span").toggleClass("fa-angle-double-right");});})</script><section><div class="highlightable body-inner-wrapper"><div id=body-inner class=external><div class="docs page"><div class=git-wr><div class=page-contributors>Contributors to this page<div class=contributors-list><a href=mailto:rafael.franzke@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/19169361?v=4" title="Rafael Franzke"></a>
<a href=mailto:vasu1124@actvirtual.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/11454395?v=4" title=vasu1124></a>
<a href=mailto:i.alidjikov@gmail.com><img class=user-icon src="https://avatars2.githubusercontent.com/u/9372594?v=4" title=ialidzhikov></a>
<a href=mailto:tim.usner@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/40451181?v=4" title="Tim Usner"></a>
<a href=mailto:martin.weindel@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/3703277?v=4" title="Martin Weindel"></a>
<a href=https://github.com/gardener/gardener/blob/master/docs/extensions/overview.md class=contributors-count>+ 4 more <i class="fa fa-external-link"></i></a></div></div><div class=page-edit><span class=last-update>Last update:
<span data-publishdate="2019-02-13 11:06:49"></span></span><div id=top-github-link><a class=github-link title="Edit this page" href=https://github.com/gardener/gardener/blob/master/docs/extensions/overview.md target=blank><i class="fa fa-edit"></i><span id=top-github-link-text title="Edit this page"></span></a></div></div></div><h1 id=extensibility-overview>Extensibility overview</h1><p>Initially, everything was developed in-tree in the Gardener project. All cloud providers and the configuration for all the supported operating systems were released together with the Gardener core itself.
But as the project grew, it got more and more difficult to add new providers and maintain the existing code base.
As a consequence and in order to become agile and flexible again, we proposed <a href=https://github.com/gardener/gardener/blob/master/docs/proposals/01-extensibility.md>GEP-1</a> (Gardener Enhancement Proposal).
The document describes an out-of-tree extension architecture that keeps the Gardener core logic independent of provider-specific knowledge (similar to what Kubernetes has achieved with <a href=https://github.com/kubernetes/enhancements/issues/88>out-of-tree cloud providers</a> or with <a href=https://github.com/kubernetes/community/pull/1258>CSI volume plugins</a>).</p><h2 id=basic-concepts>Basic concepts</h2><p>Gardener keeps running in the &ldquo;garden cluster&rdquo; and implements the core logic of shoot cluster reconciliation/deletion.
Extensions are Kubernetes controllers themselves (like Gardener) and run in the seed clusters.
As usual, we try to use Kubernetes wherever applicable.
We rely on Kubernetes extension concepts in order to enable extensibility for Gardener.
The main ideas of GEP-1 are the following:</p><ol><li><p>During the shoot reconciliation process Gardener will write CRDs into the seed cluster that are watched and managed by the extension controllers. They will reconcile (based on the <code>.spec</code>) and report whether everything went well or errors occurred in the CRD&rsquo;s <code>.status</code> field.</p></li><li><p>Gardener keeps deploying the provider-independent control plane components (etcd, kube-apiserver, etc.). However, some of these components might still need little customization by providers, e.g., additional configuration, flags, etc. In this case, the extension controllers register webhooks in order to manipulate the manifests.</p></li></ol><p><strong>Example 1</strong>:</p><p>Gardener creates a new AWS shoot cluster and requires the preparation of infrastructure in order to proceed (networks, security groups, etc.).
It writes the following CRD into the seed cluster:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>extensions.gardener.cloud/v1alpha1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>Infrastructure<span class=w>
</span><span class=w></span><span class=k>metadata</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>name</span><span class=p>:</span><span class=w> </span>infrastructure<span class=w>
</span><span class=w>  </span><span class=k>namespace</span><span class=p>:</span><span class=w> </span>shoot--core--aws<span class=m>-01</span><span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>type</span><span class=p>:</span><span class=w> </span>aws<span class=w>
</span><span class=w>  </span><span class=k>providerConfig</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>aws.provider.extensions.gardener.cloud/v1alpha1<span class=w>
</span><span class=w>    </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>InfrastructureConfig<span class=w>
</span><span class=w>    </span><span class=k>networks</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>vpc</span><span class=p>:</span><span class=w>
</span><span class=w>        </span><span class=k>cidr</span><span class=p>:</span><span class=w> </span><span class=m>10.250.0.0</span>/<span class=m>16</span><span class=w>
</span><span class=w>      </span><span class=k>internal</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=m>10.250.112.0</span>/<span class=m>22</span><span class=w>
</span><span class=w>      </span><span class=k>public</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=m>10.250.96.0</span>/<span class=m>22</span><span class=w>
</span><span class=w>      </span><span class=k>workers</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=m>10.250.0.0</span>/<span class=m>19</span><span class=w>
</span><span class=w>    </span><span class=k>zones</span><span class=p>:</span><span class=w>
</span><span class=w>    </span>- eu-west-1a<span class=w>
</span><span class=w>  </span><span class=k>dns</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>apiserver</span><span class=p>:</span><span class=w> </span>api.aws<span class=m>-01.</span>core.example.com<span class=w>
</span><span class=w>  </span><span class=k>region</span><span class=p>:</span><span class=w> </span>eu-west<span class=m>-1</span><span class=w>
</span><span class=w>  </span><span class=k>secretRef</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>name</span><span class=p>:</span><span class=w> </span>my-aws-credentials<span class=w>
</span><span class=w>  </span><span class=k>sshPublicKey</span><span class=p>:</span><span class=w> </span><span class=sd>|
</span><span class=sd>    base64(key)</span><span class=w>
</span></code></pre></div><p>Please note that the <code>.spec.providerConfig</code> is a raw blob and not evaluated or known in any way by Gardener.
Instead, it was specified by the user (in the <code>Shoot</code> resource) and just &ldquo;forwarded&rdquo; to the extension controller.
Only the AWS controller understands this configuration and will now start provisioning/reconciling the infrastructure.
It reports in the <code>.status</code> field the result:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>status</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>observedGeneration</span><span class=p>:</span><span class=w> </span>...<span class=w>
</span><span class=w>  </span><span class=k>state</span><span class=p>:</span><span class=w> </span>...<span class=w>
</span><span class=w>  </span><span class=k>lastError</span><span class=p>:</span><span class=w> </span>..<span class=w>
</span><span class=w>  </span><span class=k>lastOperation</span><span class=p>:</span><span class=w> </span>...<span class=w>
</span><span class=w>  </span><span class=k>providerStatus</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>aws.provider.extensions.gardener.cloud/v1alpha1<span class=w>
</span><span class=w>    </span><span class=k>kind</span><span class=p>:</span><span class=w> </span>InfrastructureStatus<span class=w>
</span><span class=w>    </span><span class=k>vpc</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>id</span><span class=p>:</span><span class=w> </span>vpc<span class=m>-1234</span><span class=w>
</span><span class=w>      </span><span class=k>subnets</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=k>id</span><span class=p>:</span><span class=w> </span>subnet-acbd1234<span class=w>
</span><span class=w>        </span><span class=k>name</span><span class=p>:</span><span class=w> </span>workers<span class=w>
</span><span class=w>        </span><span class=k>zone</span><span class=p>:</span><span class=w> </span>eu-west<span class=m>-1</span><span class=w>
</span><span class=w>      </span><span class=k>securityGroups</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=k>id</span><span class=p>:</span><span class=w> </span>sg-xyz12345<span class=w>
</span><span class=w>        </span><span class=k>name</span><span class=p>:</span><span class=w> </span>workers<span class=w>
</span><span class=w>    </span><span class=k>iam</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>nodesRoleARN</span><span class=p>:</span><span class=w> </span>&lt;some-arn<span class=sd>&gt;
</span><span class=sd>      instanceProfileName: foo</span><span class=w>
</span><span class=w>    </span><span class=k>ec2</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>keyName</span><span class=p>:</span><span class=w> </span>bar<span class=w>
</span></code></pre></div><p>Gardener waits until the <code>.status.lastOperation</code>/<code>.status.lastError</code> indicates that the operation reached a final state and either continuous with the next step or stops and reports the potential error.
The extension-specific output in <code>.status.providerStatus</code> is - similar to <code>.spec.providerConfig</code> - not evaluated and simply forwarded to CRDs in subsequent steps.</p><p><strong>Example 2</strong>:</p><p>Gardener deploys the control plane components into the seed cluster, e.g. the <code>kube-controller-manager</code> deployment with the following flags:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=k>apiVersion</span><span class=p>:</span><span class=w> </span>apps/v1<span class=w>
</span><span class=w></span><span class=k>kind</span><span class=p>:</span><span class=w> </span>Deployment<span class=w>
</span><span class=w></span>...<span class=w>
</span><span class=w></span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>  </span><span class=k>template</span><span class=p>:</span><span class=w>
</span><span class=w>    </span><span class=k>spec</span><span class=p>:</span><span class=w>
</span><span class=w>      </span><span class=k>containers</span><span class=p>:</span><span class=w>
</span><span class=w>      </span>- <span class=k>command</span><span class=p>:</span><span class=w>
</span><span class=w>        </span>- /usr/local/bin/kube-controller-manager<span class=w>
</span><span class=w>        </span>- --allocate-node-cidrs=<span class=kc>true</span><span class=w>
</span><span class=w>        </span>- --attach-detach-reconcile-sync-period=1m0s<span class=w>
</span><span class=w>        </span>- --controllers=<span class=cp>*,bootstrapsigner,tokencleaner</span><span class=w>
</span><span class=w>        </span>- --cluster-cidr=<span class=m>100.96.0.0</span>/<span class=m>11</span><span class=w>
</span><span class=w>        </span>- --cluster-name=shoot--core--aws<span class=m>-01</span><span class=w>
</span><span class=w>        </span>- --cluster-signing-cert-file=/srv/kubernetes/ca/ca.crt<span class=w>
</span><span class=w>        </span>- --cluster-signing-key-file=/srv/kubernetes/ca/ca.key<span class=w>
</span><span class=w>        </span>- --concurrent-deployment-syncs=<span class=m>10</span><span class=w>
</span><span class=w>        </span>- --concurrent-replicaset-syncs=<span class=m>10</span><span class=w>
</span><span class=w></span>...<span class=w>
</span></code></pre></div><p>The AWS controller requires some additional flags in order to make the cluster functional.
It needs to provide a Kubernetes cloud-config and also some cloud-specific flags.
Consequently, it registers a <code>MutatingWebhookConfiguration</code> on <code>Deployment</code>s and adds these flags to the container:</p><div class=highlight><pre class=chroma><code class=language-yaml data-lang=yaml><span class=w>        </span>- --cloud-provider=external<span class=w>
</span><span class=w>        </span>- --external-cloud-volume-plugin=aws<span class=w>
</span><span class=w>        </span>- --cloud-config=/etc/kubernetes/cloudprovider/cloudprovider.conf<span class=w>
</span></code></pre></div><p>Of course, it would have needed to create a <code>ConfigMap</code> containing the cloud config and to add the proper <code>volume</code> and <code>volumeMounts</code> to the manifest as well.</p><p>(Please note for this special example: The Kubernetes community is also working on making the <code>kube-controller-manager</code> provider-independent.
However, there will most probably be still components other than the <code>kube-controller-manager</code> which need to be adapted by extensions.)</p><p>If you are interested in writing an extension, or generally in digging deeper to find out the nitty-gritty details of the extension concepts please read <a href=https://github.com/gardener/gardener/blob/master/docs/proposals/01-extensibility.md>GEP-1</a>.
We are truly looking forward to your feedback!</p><h2 id=current-status>Current status</h2><p>Meanwhile, the out-of-tree extension architecture of Gardener is in place and has been productively validated. We are tracking all internal and external extensions of Gardener in the repo: <a href=https://github.com/gardener/gardener/tree/master/extensions#known-extension-implementations>Gardener Extensions Library</a>.</p></div></div></div><div class=howto_tickets><a href=https://github.com/gardener/gardener/issues/new/choose target=_blank><span>Let us know how can we improve.</span>
<span>Open <img src=https://gardener.cloud/images/branding/github-mark-logo-green.svg> GitHub Issue <i class="fa fa-external-link" aria-hidden=true></i></span></a></div></section></div><style></style><footer class=footer><div class="container footer-wrapper"><ul class=nav><li><a href=/blog/>Blogs</a></li><li><a href=/news/>News</a></li><li><a href=/community/>Community</a></li><li><a href=/adopter/>Adopters</a></li><li><a href=/documentation/home>Documentation</a></li></ul><img src=/images/lp/gardener-logo.svg alt="Logo Gardener" class=logo><ul class=media-wr><li><a target=_blank href=https://kubernetes.slack.com/archives/CB57N0BFG><img src=/images/branding/slack-logo-white.svg class=media-icon><div class=media-text>Slack</div></a></li><li><a target=_blank href=https://github.com/gardener><img src=/images/branding/github-mark-logo.png class=media-icon><div class=media-text>GitHub</div></a></li><li><a target=_blank href=https://www.youtube.com/channel/UCwUhwKFREV8Su0gwAJQX7tw><img src=/images/branding/youtube-logo-dark.svg class=media-icon><div class=media-text>YouTube</div></a></li><li><a target=_blank href=https://twitter.com/GardenerProject><img src=/images/branding/twitter-logo-white.svg class=media-icon><div class=media-text>Twitter</div></a></li></ul><span class=copyright>Copyright 2020 Gardener project authors. Privacy Statement</span></div></footer><script src=/js/perfect-scrollbar.min.js?1605193822></script><script src=/js/perfect-scrollbar.jquery.min.js?1605193822></script><script src=/js/jquery.sticky.js?1605193822></script><script src=/js/featherlight.min.js?1605193822></script><script src=/js/html5shiv-printshiv.min.js?1605193822></script><script src=/js/modernizr.custom.71422.js?1605193822></script><link href=/mermaid/mermaid.css?1605193822 type=text/css rel=stylesheet><script src=/mermaid/mermaid.js?1605193822></script><script src=/js/code-snippets.js?1605193822></script><script>mermaid.initialize({startOnLoad:true,htmlLables:true});function createIssue(issueUrl,page,url){var uri=issueUrl+"?title=Documentation issue on page \""+page+"\"";uri=uri+"&body=\n\n<- DESCRIBE MISSING OR FAULTY DOCUMENTATION HERE->\n\n---\nPage: ["+page+"]("+
url+")\ndon't remove the link to the page. It's required for the processor"
var res=encodeURI(uri);res+="&labels=area/documentation"
window.open(res,"issue")
return false;}
$(document).ready(function(){inlineSVG.init();$("[data-publishdate]").each(function(){$(this).text(moment($(this,"YYYY-MM-DD","YYYY-MM-DD hh:mm:ss").attr("data-publishdate")).fromNow());});new ClipboardJS('.clipboard-copy');$("body").codeSnippets();});</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2FGNSX" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript></body></html>