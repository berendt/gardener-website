<!doctype html><html lang=en class="js csstransforms3d"><head><meta charset=utf-8><meta name=viewport content="width=device-width,initial-scale=1"><meta name=description content="Project Gardener Website - A Managed Kubernetes Service Done Right"><meta name=copyright content="Copyright 2019 Gardener project authors."><title>Blogs :: Gardener</title><link rel=icon type=image/x-icon href=https://gardener.cloud/images/favicon.ico><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-32x32.png sizes=32x32><link rel=icon type=image/png href=https://gardener.cloud/images/favicon-16x16.png sizes=16x16><script>(function(w,d,s,l,i){w[l]=w[l]||[];w[l].push({'gtm.start':new Date().getTime(),event:'gtm.js'});var f=d.getElementsByTagName(s)[0],j=d.createElement(s),dl=l!='dataLayer'?'&l='+l:'';j.async=true;j.src='https://www.googletagmanager.com/gtm.js?id='+i+dl;f.parentNode.insertBefore(j,f);})(window,document,'script','dataLayer','GTM-W2FGNSX');</script><script>window.dataLayer=window.dataLayer||[];function gtag(){dataLayer.push(arguments);}
gtag('js',new Date());gtag('config','UA-165447164-1');</script><link href=/css/nucleus.css?1592577037 rel=stylesheet><link href=/css/font-awesome.min.css?1592577037 rel=stylesheet><link href=/css/hybrid.css?1592577037 rel=stylesheet><link href=/css/featherlight.min.css?1592577037 rel=stylesheet><link href=/css/perfect-scrollbar.min.css?1592577037 rel=stylesheet><link href=/css/auto-complete.css?1592577037 rel=stylesheet><link href=/css/skeleton.css?1592577037 rel=stylesheet><link href=/css/sheetslider.css?1592577037 rel=stylesheet><link rel=stylesheet href=/css/gardener.af3f59b3ed0745618f7d670067d2dccc4d95f2d5eca61ad35232a1553979026c.css><script src=/js/moment.js?1592577037></script><script src=/js/vivus.js?1592577037></script><script src=/js/scrollreveal.js?1592577037></script><script src=/js/inlineSVG.js?1592577037></script><script src=/js/jquery.min.js?1592577037></script><script src=/js/fixed.js?1592577037></script><script src=/js/clipboard.min.js?1592577037></script><script src=https://platform.linkedin.com/in.js type=text/javascript>lang:en_US</script></head><body data-url=/blog/ class=has-sticky-navigation><script>$(document).ready(function(){function initStickyNav(){var stickyPoint;var tln=document.querySelector(".tln");if(!tln){return;}
var stickyPointEl=document.querySelector(".sticky-nav-point");if(stickyPointEl==null){stickyPointEl=document.querySelector("body");stickyPoint=0;}else{stickyPoint=stickyPointEl.clientHeight+stickyPointEl.offsetTop;}
var bodySelector=document.getElementsByTagName("body")[0];var tlnHeight=tln.clientHeight;var stickyNavigation=function(){if(window.pageYOffset+tlnHeight>=stickyPoint){bodySelector.classList.add("has-sticky-navigation");tln.classList.add("sticky-top");}else{bodySelector.classList.remove("has-sticky-navigation");tln.classList.remove("sticky-top");}}
window.onscroll=function(){stickyNavigation();};}
initStickyNav();});</script><div class="tln fixedsticky sticky-top"><header class=navigation><div class=container><div class=navigation-wrapper><a href=/ class=logo><img src=/images/logo.svg>
<span class=title>Gardener</span></a>
<a class="nav-button navbar-toggler" href=#><i class="fa fa-bars"></i></a><div class=navbar-collapse><ul class=links><li class="link active"><a href=/blog/>Blogs</a></li><li class=link><a href=/community/>Community</a></li><li class=link><a href=/adopter/>Adopters</a></li><li class="link has-child"><a href=/documentation/home>Documentation</a><nav class="container menu"><ul class="topics links"><li data-nav-id=/documentation/home/ title=Home class="dd-item link root" data-depth=0><a href=/documentation/home/><span class=menu-item-text>Home</span></a></li><li data-nav-id=/documentation/concepts/ title=Concepts class="dd-item link root" data-depth=0><a href=/documentation/concepts/><span class=menu-item-text>Concepts</span></a><ul><li data-nav-id=/documentation/concepts/architecture/ title=Architecture class="dd-item link top-level" data-depth=1><a href=/documentation/concepts/architecture/><span class=menu-item-text>Architecture</span></a><ul><li data-nav-id=/components/gardener/ title=Gardener class="dd-item link" data-depth=2><a href=/components/gardener/><span class=menu-item-text>Gardener</span></a></li><li data-nav-id=/components/gardenctl/ title=gardenctl class="dd-item link" data-depth=2><a href=/components/gardenctl/><span class=menu-item-text>gardenctl</span></a></li><li data-nav-id=/components/dashboard/ title=Dashboard class="dd-item link" data-depth=2><a href=/components/dashboard/><span class=menu-item-text>Dashboard</span></a></li><li data-nav-id=/components/kubify/ title=kubify class="dd-item link" data-depth=2><a href=/components/kubify/><span class=menu-item-text>kubify</span></a></li><li data-nav-id=/components/bouquet/ title=Bouquet class="dd-item link" data-depth=2><a href=/components/bouquet/><span class=menu-item-text>Bouquet</span></a></li></ul></li><li data-nav-id=/documentation/concepts/backup-restore/ title="Backup and Restore" class="dd-item link top-level" data-depth=1><a href=/documentation/concepts/backup-restore/><span class=menu-item-text>Backup and Restore</span></a></li><li data-nav-id=/documentation/concepts/core-components/ title="Core Components" class="dd-item link top-level" data-depth=1><a href=/documentation/concepts/core-components/api-server><span class=menu-item-text>Core Components</span></a><ul><li data-nav-id=/documentation/concepts/core-components/api-server/ title="Gardener API Server" class="dd-item link" data-depth=2><a href=/documentation/concepts/core-components/api-server/><span class=menu-item-text>Gardener API Server</span></a><ul><li data-nav-id=/documentation/concepts/core-components/api-server/admission-plugins/ title="In-Tree Admission Plugins" class="dd-item link" data-depth=3><a href=/documentation/concepts/core-components/api-server/admission-plugins/><span class=menu-item-text>In-Tree Admission Plugins</span></a></li></ul></li><li data-nav-id=/documentation/concepts/core-components/gardenlet/ title=Gardenlet class="dd-item link" data-depth=2><a href=/documentation/concepts/core-components/gardenlet/><span class=menu-item-text>Gardenlet</span></a></li><li data-nav-id=/documentation/concepts/core-components/scheduler/ title="Gardener Scheduler" class="dd-item link" data-depth=2><a href=/documentation/concepts/core-components/scheduler/><span class=menu-item-text>Gardener Scheduler</span></a></li><li data-nav-id=/documentation/concepts/core-components/seed-admission-ctrl/ title="Gardener Seed Admission Controller" class="dd-item link" data-depth=2><a href=/documentation/concepts/core-components/seed-admission-ctrl/><span class=menu-item-text>Gardener Seed Admission Controller</span></a></li></ul></li><li data-nav-id=/documentation/concepts/deployment/in_kubernetes/ title="Deploying the Gardener into a Kubernetes cluster" class=dd-item><a href=/documentation/concepts/deployment/in_kubernetes/><span class=toggle></span><span class=menu-item-text></span>Deploying the Gardener into a Kubernetes cluster</span></a></a></li><li data-nav-id=/documentation/concepts/deployment/feature_gates/ title="Feature Gates" class=dd-item><a href=/documentation/concepts/deployment/feature_gates/><span class=toggle></span><span class=menu-item-text></span>Feature Gates</span></a></a></li><li data-nav-id=/documentation/concepts/extensions/ title=Extensions class="dd-item link top-level" data-depth=1><a href=/documentation/concepts/extensions/><span class=menu-item-text>Extensions</span></a><ul><li data-nav-id=/documentation/concepts/extensions/ctrl-registration/ title="Extension controller registration" class="dd-item link" data-depth=2><a href=/documentation/concepts/extensions/ctrl-registration/><span class=menu-item-text>Extension controller registration</span></a></li></ul></li><li data-nav-id=/documentation/concepts/mcm/ title="Machine Controller Manager" class="dd-item link top-level" data-depth=1><a href=/documentation/concepts/mcm/><span class=menu-item-text>Machine Controller Manager</span></a></li><li data-nav-id=/documentation/concepts/monitoring/ title=Monitoring class="dd-item link top-level" data-depth=1><a href=/documentation/concepts/monitoring/><span class=menu-item-text>Monitoring</span></a><ul><li data-nav-id=/documentation/concepts/monitoring/alerting/ title=Alerting class=dd-item><a href=/documentation/concepts/monitoring/alerting/><span class=toggle></span><span class=menu-item-text></span>Alerting</span></a></a></li><li data-nav-id=/documentation/concepts/monitoring/extending/ title="Extending the Monitoring Stack" class=dd-item><a href=/documentation/concepts/monitoring/extending/><span class=toggle></span><span class=menu-item-text></span>Extending the Monitoring Stack</span></a></a></li><li data-nav-id=/documentation/concepts/monitoring/operator_alerts/ title="Operator Alerts" class=dd-item><a href=/documentation/concepts/monitoring/operator_alerts/><span class=toggle></span><span class=menu-item-text></span>Operator Alerts</span></a></a></li><li data-nav-id=/documentation/concepts/monitoring/user_alerts/ title="User Alerts" class=dd-item><a href=/documentation/concepts/monitoring/user_alerts/><span class=toggle></span><span class=menu-item-text></span>User Alerts</span></a></a></li></ul></li></ul></li><li data-nav-id=/documentation/guides/ title="How-To Guides" class="dd-item link root" data-depth=0><a href=/documentation/guides/><span class=menu-item-text>How-To Guides</span></a><ul><li data-nav-id=/documentation/guides/administer_shoots/ title="Administer Client (Shoot) Clusters" class="dd-item link top-level" data-depth=1><a href=/documentation/guides/administer_shoots/><span class=menu-item-text>Administer Client (Shoot) Clusters</span></a></li><li data-nav-id=/documentation/guides/applications/ title=Applications class="dd-item link top-level" data-depth=1><a href=/documentation/guides/applications/><span class=menu-item-text>Applications</span></a></li><li data-nav-id=/documentation/guides/client_tools/ title="Set Up Client Tools" class="dd-item link top-level" data-depth=1><a href=/documentation/guides/client_tools/><span class=menu-item-text>Set Up Client Tools</span></a></li><li data-nav-id=/documentation/guides/gardener-cookies/ title="Gardener Cookies" class="dd-item link top-level" data-depth=1><a href=/documentation/guides/gardener-cookies/><span class=menu-item-text>Gardener Cookies</span></a></li><li data-nav-id=/documentation/guides/install_gardener/ title="Install Gardener" class="dd-item link top-level" data-depth=1><a href=/documentation/guides/install_gardener/><span class=menu-item-text>Install Gardener</span></a></li><li data-nav-id=/documentation/guides/monitoring_and_troubleshooting/ title="Monitor and Troubleshoot" class="dd-item link top-level" data-depth=1><a href=/documentation/guides/monitoring_and_troubleshooting/><span class=menu-item-text>Monitor and Troubleshoot</span></a></li></ul></li><li data-nav-id=/documentation/tutorials/ title=Tutorials class="dd-item link root" data-depth=0><a href=/documentation/tutorials/><span class=menu-item-text>Tutorials</span></a><ul><li data-nav-id=/documentation/tutorials/dynamic-pvc/ title="Dynamic Volume Provisioning" class="dd-item link top-level" data-depth=1><a href=/documentation/tutorials/dynamic-pvc/><span class=menu-item-text>Dynamic Volume Provisioning</span></a></li><li data-nav-id=/documentation/tutorials/featureflag/ title="Feature Flags in Kubernetes Applications" class="dd-item link top-level" data-depth=1><a href=/documentation/tutorials/featureflag/><span class=menu-item-text>Feature Flags in Kubernetes Applications</span></a></li><li data-nav-id=/documentation/tutorials/gpu/ title="GPU Enabled Cluster" class="dd-item link top-level" data-depth=1><a href=/documentation/tutorials/gpu/><span class=menu-item-text>GPU Enabled Cluster</span></a></li><li data-nav-id=/documentation/tutorials/knative-install/ title="Install Knative in Gardener clusters" class="dd-item link top-level" data-depth=1><a href=/documentation/tutorials/knative-install/><span class=menu-item-text>Install Knative in Gardener clusters</span></a></li><li data-nav-id=/documentation/tutorials/node-overprovisioning/ title="Cluster Overprovisioning" class="dd-item link top-level" data-depth=1><a href=/documentation/tutorials/node-overprovisioning/><span class=menu-item-text>Cluster Overprovisioning</span></a></li><li data-nav-id=/documentation/tutorials/s3/ title="Shared storage with S3 backend" class="dd-item link top-level" data-depth=1><a href=/documentation/tutorials/s3/><span class=menu-item-text>Shared storage with S3 backend</span></a></li><li data-nav-id=/documentation/tutorials/shoot_istio_dns_certs/ title="Gardener yourself a Shoot with Istio, custom Domains, and Certificates" class="dd-item link top-level" data-depth=1><a href=/documentation/tutorials/shoot_istio_dns_certs/><span class=menu-item-text>Gardener yourself a Shoot with Istio, custom Domains, and Certificates</span></a></li></ul></li><li data-nav-id=/documentation/references/ title="API Reference" class="dd-item link root" data-depth=0><a href=/documentation/references/><span class=menu-item-text>API Reference</span></a><ul><li data-nav-id=/api-reference/core/ title=Core class="dd-item link top-level" data-depth=1><a href=/api-reference/core/><span class=menu-item-text>Core</span></a></li><li data-nav-id=/api-reference/extensions/ title=Extensions class="dd-item link top-level" data-depth=1><a href=/api-reference/extensions/><span class=menu-item-text>Extensions</span></a></li><li data-nav-id=/api-reference/settings/ title=Settings class="dd-item link top-level" data-depth=1><a href=/api-reference/settings/><span class=menu-item-text>Settings</span></a></li></ul></li><li data-nav-id=/documentation/contribute/ title=Contribute class="dd-item link root" data-depth=0><a href=/documentation/contribute/><span class=menu-item-text>Contribute</span></a><ul><li data-nav-id=/contribute/code/ title=Code class="dd-item link top-level" data-depth=1><a href=/contribute/code/><span class=menu-item-text>Code</span></a><ul><li data-nav-id=/documentation/contribute/10_code/10-contribution_guide/ title="Contribution Guide" class="dd-item link" data-depth=2><a href=/documentation/contribute/10_code/10-contribution_guide/><span class=menu-item-text>Contribution Guide</span></a></li><li data-nav-id=/documentation/contribute/10_code/12-security_guide/ title="Security Release Process" class="dd-item link" data-depth=2><a href=/documentation/contribute/10_code/12-security_guide/><span class=menu-item-text>Security Release Process</span></a></li><li data-nav-id=/documentation/contribute/10_code/13_env/ title=Enviroment class="dd-item link" data-depth=2><a href=/documentation/contribute/10_code/13_env/><span class=menu-item-text>Enviroment</span></a></li><li data-nav-id=/documentation/contribute/10_code/14_cicd/ title=CI/CD class="dd-item link" data-depth=2><a href=/documentation/contribute/10_code/14_cicd/><span class=menu-item-text>CI/CD</span></a></li><li data-nav-id=/documentation/contribute/10_code/15_conf_secrets/ title="Configuration and Usage" class="dd-item link" data-depth=2><a href=/documentation/contribute/10_code/15_conf_secrets/><span class=menu-item-text>Configuration and Usage</span></a></li><li data-nav-id=/documentation/contribute/10_code/20_dependencies/ title=Dependencies class="dd-item link" data-depth=2><a href=/documentation/contribute/10_code/20_dependencies/><span class=menu-item-text>Dependencies</span></a></li><li data-nav-id=/documentation/contribute/10_code/27_deploy_into_cluster/ title="Deploy into a Cluster" class="dd-item link" data-depth=2><a href=/documentation/contribute/10_code/27_deploy_into_cluster/><span class=menu-item-text>Deploy into a Cluster</span></a></li><li data-nav-id=/documentation/contribute/10_code/30_deploy_seed_into_aks/ title="Deploy into AKS" class="dd-item link" data-depth=2><a href=/documentation/contribute/10_code/30_deploy_seed_into_aks/><span class=menu-item-text>Deploy into AKS</span></a></li><li data-nav-id=/documentation/contribute/10_code/37_process/ title=Process class="dd-item link" data-depth=2><a href=/documentation/contribute/10_code/37_process/><span class=menu-item-text>Process</span></a></li><li data-nav-id=/documentation/contribute/10_code/40_repositories/ title=Repositories class="dd-item link" data-depth=2><a href=/documentation/contribute/10_code/40_repositories/><span class=menu-item-text>Repositories</span></a></li></ul></li><li data-nav-id=/contribute/docs/ title=Documentation class="dd-item link top-level" data-depth=1><a href=/contribute/docs/><span class=menu-item-text>Documentation</span></a><ul><li data-nav-id=/documentation/contribute/20_documentation/10_organisation/ title=Organisation class="dd-item link" data-depth=2><a href=/documentation/contribute/20_documentation/10_organisation/><span class=menu-item-text>Organisation</span></a></li><li data-nav-id=/documentation/contribute/20_documentation/20_style/ title="Style Guide" class="dd-item link" data-depth=2><a href=/documentation/contribute/20_documentation/20_style/><span class=menu-item-text>Style Guide</span></a></li><li data-nav-id=/documentation/contribute/20_documentation/25_markup/ title=Markdown class="dd-item link" data-depth=2><a href=/documentation/contribute/20_documentation/25_markup/><span class=menu-item-text>Markdown</span></a><ul><li data-nav-id=/documentation/contribute/20_documentation/25_markup/attachments/ title=Attachments class=dd-item><a href=/documentation/contribute/20_documentation/25_markup/attachments/><span class=toggle></span><span class=menu-item-text></span>Attachments</span></a></a></li><li data-nav-id=/documentation/contribute/20_documentation/25_markup/button/ title=Button class=dd-item><a href=/documentation/contribute/20_documentation/25_markup/button/><span class=toggle></span><span class=menu-item-text></span>Button</span></a></a></li><li data-nav-id=/documentation/contribute/20_documentation/25_markup/expand/ title=Expand class=dd-item><a href=/documentation/contribute/20_documentation/25_markup/expand/><span class=toggle></span><span class=menu-item-text></span>Expand</span></a></a></li><li data-nav-id=/documentation/contribute/20_documentation/25_markup/mermaid/ title=Mermaid class=dd-item><a href=/documentation/contribute/20_documentation/25_markup/mermaid/><span class=toggle></span><span class=menu-item-text></span>Mermaid</span></a></a></li><li data-nav-id=/documentation/contribute/20_documentation/25_markup/notice/ title=Notice class=dd-item><a href=/documentation/contribute/20_documentation/25_markup/notice/><span class=toggle></span><span class=menu-item-text></span>Notice</span></a></a></li></ul></li></ul></li></ul></li></ul></nav></li></ul></div></div></div></header></div><script>$(".navigation .navbar-toggler").click(function(evt){$(".navigation .navbar-collapse").toggle();$(".navigation").toggleClass("collapsed");$(".navigation .search-box").toggle();})</script><div class="main container"><section><div class="highlightable body-inner-wrapper"><div id=body-inner><script src=/js/moment.js></script><div class="page blogs"><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:wuyelei@pingcap.com><img class=user-icon src="https://avatars0.githubusercontent.com/u/18556593?v=4" title="Aylei Wu"></a>
<a href=mailto:georgi.pavlov@sap.com><img class=user-icon src="https://avatars0.githubusercontent.com/u/52317188?v=4" title="Georgi Pavlov"></a></ul><span class=publishdate data-publishdate=2020-05-27>2020-05-27</span></div><div class="ten columns"><h2>PingCAP’s Experience in Implementing their Managed TiDB Service with Gardener<a href=/blog/2020-05/00/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="PingCAP’s Experience in Implementing their Managed TiDB Service with Gardener" data-url=https://gardener.cloud/blog/2020-05/00/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2020-05/00/></script></div><p><p>Gardener is showing successful collaboration with its growing community of contributors and adopters. With this come some success stories, including PingCAP using Gardener to implement its managed service.</p><h3 id=about-pingcap-and-its-tidb-cloud>About PingCAP and its TiDB Cloud</h3><p><a href=https://pingcap.com/about/>PingCAP</a> started in 2015, when three seasoned infrastructure engineers working at leading Internet companies got sick and tired of the way databases were managed, scaled and maintained. Seeing no good solution on the market, they decided to build their own - the open-source way. With the help of a first-class team and hundreds of contributors from around the globe, PingCAP is building a distributed NewSQL, hybrid transactional and analytical processing (HTAP) database.</p><p>Its flagship project, <a href=https://en.wikipedia.org/wiki/TiDB>TiDB</a>, is a cloud-native distributed SQL database with MySQL compatibility, and one of the <a href=https://github.com/pingcap/tidb>most popular</a> open-source database projects - with 23.5K+ stars and 400+ contributors. Its sister project <a href=https://github.com/tikv/tikv>TiKV</a> is a <a href="https://landscape.cncf.io/format=card-mode">Cloud Native Interactive Landscape project</a>.</p><p>PingCAP envisioned their managed TiDB service, known as <a href=https://pingcap.com/tidb-cloud/sign-up/>TiDB Cloud</a>, to be multi-tenant, secure, cost-efficient, and to be compatible with different cloud providers. As a result, the company turned to Gardener to build their managed TiDB cloud service offering.</p><img title="TiDB Cloud Beta Preview" src=/blog/2020-05/00/00-001.png style=width:90%;height:auto><figcaption style=text-align:center;margin-top:-25px;margin-bottom:30px;font-size:90%>TiDB Cloud Beta Preview</figcaption><h3 id=limitations-with-other-public-managed-kubernetes-services>Limitations with other public managed Kubernetes services</h3><p>Previously, PingCAP encountered issues while using other public managed K8s cluster services, to develop the first version of its TiDB Cloud. Their worst pain point was that they felt helpless when encountering certain malfunctions. PingCAP wasn’t able to do much to resolve these issues, except waiting for the providers’ help. More specifically, they experienced problems due to cloud-provider specific Kubernetes system upgrades, delays in the support response (which could be avoided in exchange of a costly support fee), and no control over when things got fixed.</p><p>There was also a lot of cloud-specific integration work needed to follow a multi-cloud strategy, which proved to be expensive both to produce and maintain. With one of these managed K8s services, you would have to integrate the instance API, as opposed to a solution like Gardener, which provides a unified API for all clouds. Such a unified API eliminates the need to worry about cloud specific-integration work altogether.</p><img src=/blog/2020-05/00/00-002.png style=width:60%;height:auto><h3 id=why-pingcap-chose-gardener-to-build-tidb-cloud>Why PingCAP chose Gardener to build TiDB Cloud</h3><blockquote><p><i>“Gardener has similar concepts to Kubernetes. Each Kubernetes cluster is just like a Kubernetes pod, so the similar concepts apply, and the controller pattern makes Gardener easy to manage. It was also easy to extend, as the team was already very familiar with Kubernetes, so it wasn’t hard for us to extend Gardener. We also saw that Gardener has a very active community, which is always a plus!”</i><footer>- Aylei Wu, (Cloud Engineer) at PingCAP</footer></p></blockquote><p>At first glance, PingCAP had initial reservations about using Gardener - mainly due to its adoption level (still at the beginning) and an apparent complexity of use. However, these were soon eliminated as they learned more about the solution. As Aylei Wu mentioned during the last <a href="https://www.youtube.com/watch?v=nqkzUylfIbU&feature=youtu.be">Gardener community meeting</a>, <em><strong>“a good product speaks for itself”</strong></em>, and once the company got familiar with Gardener, they quickly noticed that the concepts were very similar to Kubernetes, which they were already familiar with.</p><p>They recognized that Gardener would be their best option, as it is highly extensible and provides a unified abstraction API layer. In essence, the machines can be managed via a machine controller manager for different cloud providers - without having to worry about the individual cloud APIs.</p><p>They agreed that Gardener’s solution, although complex, was definitely worth it. Even though it is a relatively new solution, meaning they didn’t have access to other user testimonials, they decided to go with the service since it checked all the boxes (and as SAP was running it productively with a huge fleet). PingCAP also came to the conclusion that building a managed Kubernetes service themselves would not be easy. Even if they were to build a managed K8s service, they would have to heavily invest in development and would still end up with an even more complex platform than Gardener’s. For all these reasons combined, PingCAP decided to go with Gardener to build its TiDB Cloud.</p><img src=/blog/2020-05/00/00-003.png style=width:70%;height:auto><p>Here are certain features of Gardener that PingCAP found appealing:</p><ul><li><strong>Cloud agnostic:</strong> Gardener’s abstractions for cloud-specific integrations dramatically reduce the investment in supporting more than one cloud infrastructure. Once the integration with Amazon Web Services was done, moving on to Google Cloud Platform proved to be relatively easy. (At the moment, TiDB Cloud has subscription plans available for both GCP and AWS, and they are planning to support Alibaba Cloud in the future.)</li><li><strong>Familiar concepts:</strong> Gardener is K8s native; its concepts are easily related to core Kubernetes concepts. As such, it was easy to onboard for a K8s experienced team like PingCAP’s SRE team.</li><li><strong>Easy to manage and extend:</strong> Gardener’s API and extensibility are easy to implement, which has a positive impact on the implementation, maintenance costs and time-to-market.</li><li><strong>Active community:</strong> Prompt and quality responses on Slack from the Gardener team tremendously helped to quickly onboard and produce an efficient solution.</li></ul><h3 id=how-pingcap-built-tidb-cloud-with-gardener>How PingCAP built TiDB Cloud with Gardener</h3><p>On a technical level, PingCAP’s set-up overview includes the following:</p><ul><li>A Base Cluster globally, which is the top-level control plane of TiDB Cloud</li><li>A Seed Cluster per cloud provider per region, which makes up the fundamental data plane of TiDB Cloud</li><li>A Shoot Cluster is dynamically provisioned per tenant per cloud provider per region when requested</li><li>A tenant may create one or more TiDB clusters in a Shoot Cluster</li></ul><p>As a real world example, PingCAP sets up the Base Cluster and Seed Clusters in advance. When a tenant creates its first TiDB cluster under the us-west-2 region of AWS, a Shoot Cluster will be dynamically provisioned in this region, and will host all the TiDB clusters of this tenant under us-west-2. Nevertheless, if another tenant requests a TiDB cluster in the same region, a <strong>new</strong> Shoot Cluster will be provisioned. Since different Shoot Clusters are located in different VPCs and can even be hosted under different AWS accounts, TiDB Cloud is able to achieve hard isolation between tenants and meet the critical security requirements for our customers.</p><p>To automate these processes, PingCAP creates a service in the Base Cluster, known as the TiDB Cloud “Central” service. The Central is responsible for managing shoots and the TiDB clusters in the Shoot Clusters. As shown in the following diagram, user operations go to the Central, being authenticated, authorized, validated, stored and then applied asynchronously in a controller manner. The Central will talk to the Gardener API Server to create and scale Shoot clusters. The Central will also access the Shoot API Service to deploy and reconcile components in the Shoot cluster, including control components (<a href=https://github.com/pingcap/tidb-operator>TiDB Operator</a>, API Proxy, Usage Reporter for billing, etc.) and the TiDB clusters.</p><img title="TiDB Cloud on Gardener Architecture Overview" src=/blog/2020-05/00/00-004.png style=width:90%;height:auto><figcaption style=text-align:center;margin-top:-25px;margin-bottom:30px;font-size:90%>TiDB Cloud on Gardener Architecture Overview</figcaption><h3 id=whats-next-for-pingcap-and-gardener>What’s next for PingCAP and Gardener</h3><p>With the initial success of using the project to build TiDB Cloud, PingCAP is now working heavily on the stability and day-to-day operations of TiDB Cloud on Gardener. This includes writing Infrastructure-as-Code scripts/controllers with it to achieve GitOps, building tools to help diagnose problems across regions and clusters, as well as running chaos tests to identify and eliminate potential risks. After benefiting greatly from the community, PingCAP will continue to contribute back to Gardener.</p><p>In the future, PingCAP also plans to support more cloud providers like AliCloud and Azure. Moreover, PingCAP may explore the opportunity of running TiDB Cloud in on-premise data centers with the constantly expanding support this project provides. Engineers at PingCAP enjoy the ease of learning from Gardener’s kubernetes-like concepts and being able to apply them everywhere. Gone are the days of heavy integrations with different clouds and worrying about vendor stability. With this project, PingCAP now sees broader opportunities to land TiDB Cloud on various infrastructures to meet the needs of their global user group.</p><p>Stay tuned, more <a href=https://gardener.cloud/blog/>blog posts</a> to come on how Gardener is collaborating with its contributors and adopters to bring fully-managed clusters at scale everywhere! If you want to join in on the fun, <a href=https://gardener.cloud/community/>connect with our community</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:georgi.pavlov@sap.com><img class=user-icon src="https://avatars0.githubusercontent.com/u/52317188?v=4" title="Georgi Pavlov"></a></ul><span class=publishdate data-publishdate=2020-05-11>2020-05-11</span></div><div class="ten columns"><h2>New Website, Same Green Flower<a href=/blog/2020_week_20/00/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="New Website, Same Green Flower" data-url=https://gardener.cloud/blog/2020_week_20/00/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2020_week_20/00/></script></div><p><p>The <a href=https://gardener.cloud>Gardener project website</a> just received a serious facelift. Here are some of the highlights:</p><ul><li><strong>A completely new landing page</strong>, emphasizing both on Gardener&rsquo;s value proposition and the open community behind it.</li><li><strong>The Community page</strong> was reconstructed for quick access to the various community channels and will soon merge the Adopters page. It will provide a better insight into success stories from the communty.</li><li><strong>A completely new News section and content type</strong> available at <a href=https://github.com/gardener/documentation/tree/master/website/news>/documentation/news</a>. Use metadata such as <code>publishdate</code> and <code>archivedate</code> to schedule for news publish and archive automatically, regardless of when you contributed them. You can now track what&rsquo;s happening from the landing page or in the dedicated <a href=https://gardener.cloud/news>News</a> section on the website and share.</li><li><strong>Improved blogs</strong> layout. One-click sharing options are available starting with simple URL copy link and twitter button and others will closely follow up. While we are at it, give it a try. Spread the word.</li></ul><p><strong>Website builds</strong> also got to a new level with:</p><ul><li><strong>Containerization</strong>. The whole build environment is containerized now, eliminating differences between local and CI/CD setup and reducing content developers focus only to the <code>/documentation</code> repository. Running a local server for live preview of changes as you make them when developing content for the website, is now as easy as runing <code>make serve</code> in your local <code>/documentation</code> clone.</li><li><strong>Numerous improvements to the buld scripts</strong>. More <a href=https://github.com/gardener/website-generator#build-configuration>configuration options</a>, authenticated requests, fault tollerance and performance.</li><li><strong>Good news for Windows WSL users</strong> who will now nejoy a significantly support. See the updated <a href=https://github.com/gardener/website-generator#windows-10-users>README</a> for details on that.</li><li><strong>A number of improvements</strong> in layouts styles, site assets and hugo site-building techniques.</li></ul><p><strong>But hey, THAT&rsquo;S NOT ALL!</strong></p><p>Stay tuned for more improvements around the corner. The biggest ones are aligning the documentation with the new theme and restructuring it along, more emphasis on community success stories all around, more sharing options and more than a handful of shortcodes for content development and &mldr; let&rsquo;s cut the spoilers here.</p><p>I hope you will like it. Let us know what you think about it. Feel free to leave comments and discuss on <img src=../../../images/branding/twitter-logo-green.svg class="icon inline"><a href=https://twitter.com/GardenerProject>Twitter</a> and <img src=../../../images/branding/slack-logo-green.svg class="icon inline"><a href=https://kubernetes.slack.com/archives/CB57N0BFG>Slack</a>, or in case of issues - on <img src=../../../images/branding/github-mark-logo-green.svg class="icon inline"><a href=https://github.com/gardener/documentation/issues>GitHub</a>.</p><p><strong>Go ahead and help us spread the word: <a href=https://gardener.cloud>https://gardener.cloud</a></strong></p><picture>
<source srcset=../../../blog/2020_week_20/website-screen-L.png media="(min-width: 750px)"><img src=../../../blog/2020_week_20/website-screen.png></picture><br></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2019-06-11>2019-06-11</span></div><div class="ten columns"><h2>Cluster Overprovisioning<a href=/blog/2019_week_21/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Cluster Overprovisioning" data-url=https://gardener.cloud/blog/2019_week_21/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2019_week_21/></script></div><p><p>This tutorial describes how to overprovisioning of cluster nodes for scaling and failover. This is desired
when you have work load that need to scale up quickly without waiting for the new cluster nodes to be created
and join the cluster.</p><img src=../blog/2019_week_21/teaser.png title=overview width=100% class="drop-shadow reveal-fast"><p>A similar problem occurs when crashing a node from the Hyperscaler. This must be replaced by Kubernetes as fast
as possible. The solution can be <strong>overprovisioning</strong> of nodes</p><p>..read some more on <a href=../readmore/overprovisioning>Cluster Overprovisioning</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2019-06-11>2019-06-11</span></div><div class="ten columns"><h2>Feature Flags in Kubernetes Applications<a href=/blog/2019_week_21_2/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Feature Flags in Kubernetes Applications" data-url=https://gardener.cloud/blog/2019_week_21_2/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2019_week_21_2/></script></div><p><p>Feature flags are used to change the behavior of a program at runtime without forcing a restart.</p><p>Although they are essential in a native cloud environment, they cannot be implemented without significant
effort on some platforms. Kubernetes has made this trivial. Here we will implement them through labels and
annotations, but you can also implement them by connecting directly to the Kubernetes API Server.</p><img src=../blog/2019_week_21_2/teaser.gif title=overview width=100% class="drop-shadow reveal-fast"><p>Possible Use Cases</p><ul><li>turn on/off a specific instance</li><li>turn on/off profiling of a specific instance</li><li>change the logging level, to capture detailed logs during a specific event</li><li>change caching strategy at runtime</li><li>change timeouts in production</li><li>toggle on/off some special verification</li></ul><p>..read some more on <a href=../readmore/featureflag>Feature Flags for App</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2019-06-11>2019-06-11</span></div><div class="ten columns"><h2>Manually adding a node to an existing cluster<a href=/blog/2019_week_06/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Manually adding a node to an existing cluster" data-url=https://gardener.cloud/blog/2019_week_06/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2019_week_06/></script></div><p><p>Gardener has an excellent ability to <a href=/components/mcm/>automatically scale machines</a> for the cluster. From the point of view
of scalability, there is <strong>no need for manual intervention</strong>.</p><object type=image/svg+xml data=../blog/2019_week_06/teaser.svg style="margin:3rem auto;display:block" class=drop-shadow></object><p>This tutorial is useful for those end-users who need specifically configured nodes, which are not yet supported
by Gardener. For example: an end-user who wants some workload that requires <code>runnc</code> instead of <code>runc</code> as container
runtime.</p><p>..read some more on <a href=../readmore/adding-nodes>Adding Nodes to a Cluster</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2019-06-11>2019-06-11</span></div><div class="ten columns"><h2>Organizing Access Using kubeconfig Files<a href=/blog/2019_week_02/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Organizing Access Using kubeconfig Files" data-url=https://gardener.cloud/blog/2019_week_02/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2019_week_02/></script></div><p><p>The kubectl command-line tool uses <code>kubeconfig</code> files to find the information it needs to choose a cluster and
communicate with the API server of a cluster.</p><object type=image/svg+xml data=../blog/2019_week_02/teaser.svg style="margin:3rem auto;display:block" class=drop-shadow></object><blockquote><p>What happens if your kubeconfig file of your production cluster is leaked or published by accident?</p></blockquote><p>Since there is no possibility to rotate or revoke the initial kubeconfig, there is only one
way to protect your infrastructure or application if it is has leaked - <strong>delete the cluster</strong>.</p><p>..learn more on <a href=../readmore/working-with-kubeconfig>Work with kubeconfig files</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2018-07-11>2018-07-11</span></div><div class="ten columns"><h2>Hibernate a Cluster to save money<a href=/blog/2018_week_40/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Hibernate a Cluster to save money" data-url=https://gardener.cloud/blog/2018_week_40/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2018_week_40/></script></div><p><p>You want to experiment with Kubernetes or have set up a customer scenario, but you don&rsquo;t want to run the
cluster 24 / 7 for reasons of cost?</p><object type=image/svg+xml data=../blog/2018_week_40/teaser_patched.svg style="margin:3rem auto;display:block" class=drop-shadow></object><p>The Gardener gives you the possibility to scale your cluster down to <strong>zero nodes</strong>.</p><p>..read some more on <a href=../readmore/hibernate>Hibernate a Cluster</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Big things come in small packages<a href=/blog/2018_week_07/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Big things come in small packages" data-url=https://gardener.cloud/blog/2018_week_07/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2018_week_07/></script></div><p><p>Microservices tend to use smaller runtimes but you can <strong>use what you have</strong> today - and this can be
a <strong>problem in kubernetes</strong>.</p><p>Switching your architecture from a monolith to microservices has many advantages, both in the
way you write software and the way it is used throughout its lifecycle. In this post, my attempt is to
cover one problem which does not get as much attention and discussion - <strong>size of the technology stack</strong>.</p><h2 id=general-purpose-technology-stack>General purpose technology stack</h2><img src=../blog/2018_week_07/blog-service-common-stack.png title=logo width=100% class="drop-shadow reveal-fast"><p>There is a tendency to be more generalized in development and to apply this pattern to all services. One feels
that a homogeneous image of the technology stack is good if it is the same for all services.</p><p>One forgets, however, that a large percentage of the integrated infrastructure is not used by all services in
the same way, and is therefore only a burden. Thus, resources are wasted and the entire application becomes
expensive in operation and scales very badly.</p><h2 id=light-technology-stack>Light technology stack</h2><p>Due to the lightweight nature of your service, you can run more containers on a physical server and virtual
machines. The result is higher resource utilization.</p><img src=../blog/2018_week_07/blog-service-service-stack.png title=logo width=100% class="drop-shadow reveal-fast"><p>Additionally, microservices are developed and deployed as containers independently of each another. This means that a development
team can develop, optimize and deploy a microservice without impacting other subsystems.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Auditing Kubernetes for Secure Setup<a href=/blog/2018_week_46/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Auditing Kubernetes for Secure Setup" data-url=https://gardener.cloud/blog/2018_week_46/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2018_week_46/></script></div><p><p>In summer 2018, the <a href=https://github.com/gardener/gardener>Gardener project team</a> asked <a href=https://kinvolk.io/>Kinvolk</a> to execute several penetration tests in its role as third-party contractor. The goal of this ongoing work is to increase the security of
all Gardener stakeholders in the open source community. Following the Gardener architecture, the control plane of a
Gardener managed shoot cluster resides in the corresponding seed cluster. This is a
<a href=https://kubernetes.io/blog/2018/05/17/gardener/#kubernetes-control-plane>Control-Plane-as-a-Service</a> with
a <a href=https://kubernetes.io/blog/2018/05/17/gardener/#network-air-gap>network air gap</a>.</p><object type=image/svg+xml data=../blog/2018_week_46/teaser.svg style="margin:3rem auto;display:block" class=drop-shadow></object><p>Along the way we found various kinds of security issues, for example, due to misconfiguration or missing isolation,
as well as two special problems with upstream Kubernetes and its Control-Plane-as-a-Service
architecture.</p><p>..read some more on <a href=../readmore/insecure>Auditing Kubernetes for Secure Setup</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Anti Patterns<a href=/blog/2018_week_22/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Anti Patterns" data-url=https://gardener.cloud/blog/2018_week_22/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2018_week_22/></script></div><p><img src=../blog/2018_week_22/blog-antipattern.png title=logo width=100% class="drop-shadow reveal-fast"><h2 id=running-as-root-user>Running as root user</h2><p>Whenever possible, do not run containers as root users. One could be
tempted to say that Kubernetes Pods and Node are well separated. The host and the container
share the same kernel. If the container is compromised, a root user can damage the underlying
node. Use <code>RUN groupadd -r anygroup && useradd -r -g anygroup myuser</code> to create a group
and a user in it. Use the <code>USER</code> command to switch to this user.</p><h2 id=storing-data-or-logs-in-containers>Storing data or logs in containers</h2><p>Containers are ideal for stateless applications
and should be transient. This means that no data or logs should be stored in the
container, as they are lost when the container is closed. If absolutely necessary,
you can use persistence volumes instead to persist them outside the containers.
However, an ELK stack is preferred for storing and processing log files.</p><p>..read some more on <a href=../readmore/antipattern>Common Kubernetes Antipattern</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Cookies are dangerous...<a href=/blog/2018_week_51/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Cookies are dangerous..." data-url=https://gardener.cloud/blog/2018_week_51/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2018_week_51/></script></div><p><p><strong>&mldr;they mess up the figure.</strong></p><img src=../blog/2018_week_51/cookie.jpg title=overview width=100% class="drop-shadow reveal-fast"><p>For a team event during the Christmas season we decided to completely reinterpret the
topic <code>cookies</code>&mldr; since the vegetables have gone on a well-deserved vacation. :-)</p><p>Get recipe on <a href=../readmore/cookies>Gardener Cookies</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Frontend HTTPS<a href=/blog/2018_week_17/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Frontend HTTPS" data-url=https://gardener.cloud/blog/2018_week_17/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2018_week_17/></script></div><p><img src=../blog/2018_week_17/blog-https.png title=logo width=100% class="drop-shadow reveal-fast"><p>For encrypted communication between the client to the load balancer, you need to specify a TLS private key and
certificate to be used by the ingress controller.</p><p>Create a secret in the namespace of the ingress containing the TLS private key and certificate. Then configure the
secret name in the TLS configuration section of the ingress specification.</p><p>..read on <a href=../readmore/https>HTTPS - Self Signed Certificates</a> how to configure it.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Hardening the Gardener Community Setup<a href=/blog/2018_week_50/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Hardening the Gardener Community Setup" data-url=https://gardener.cloud/blog/2018_week_50/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2018_week_50/></script></div><p><p>The <a href=https://github.com/gardener/gardener>Gardener project team</a> has analyzed the impact of the
Gardener <a href=https://groups.google.com/forum/#!topic/gardener/Pom2Y70cDpw>CVE-2018-2475</a> and
the <a href=https://groups.google.com/forum/#!topic/kubernetes-announce/GVllWCg6L88>Kubernetes CVE-2018-1002105</a> on
the Gardener Community Setup. Following some recommendations it is possible to mitigate both vulnerabilities.</p><p>Read more on <a href=../readmore/hardening>Hardening the Gardener Community Setup</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Kubernetes is available in Docker for Mac 17.12 CE<a href=/blog/2018_week_06/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Kubernetes is available in Docker for Mac 17.12 CE" data-url=https://gardener.cloud/blog/2018_week_06/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2018_week_06/></script></div><p><table style=border:0><tr><td><img src=../blog/2018_week_06/blog-kubernetes-enable.png title=logo width=100% class="drop-shadow reveal-fast"></td><td valign=top><div><b>Kubernetes is only available in Docker for Mac 17.12 CE and higher</b> on the Edge channel. Kubernetes
support is not included in Docker for Mac Stable releases. To find out more about Stable and Edge channels
and how to switch between them, see
<a href=https://docs.docker.com/docker-for-mac/#general>general configuration</a>.</div></td></tr></table>Docker for Mac 17.12 CE (and higher) Edge includes a standalone Kubernetes server that runs on Mac,
so that you can test deploying your Docker workloads on Kubernetes.<p>The Kubernetes client command, kubectl, is included and configured to connect to the local Kubernetes server.
If you have kubectl already installed and pointing to some other environment, such as minikube or a GKE cluster,
be sure to change context so that kubectl is pointing to docker-for-desktop:</p><p>&mldr;see more on <a href=https://docs.docker.com/docker-for-mac/#kubernetes>Docker.com</a></p><p>I recommend to <a href=/howto/kube-shell>setup your shell</a> to see which KUBECONFIG is active.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Namespace Isolation<a href=/blog/2018_week_09/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Namespace Isolation" data-url=https://gardener.cloud/blog/2018_week_09/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2018_week_09/></script></div><p><p>&mldr;or <strong>DENY all traffic from other namespaces</strong></p><p>You can configure a <strong>NetworkPolicy</strong> to deny all traffic from other namespaces while allowing all traffic
coming from the same namespace the pod is deployed to. There are many reasons why you may chose to configure Kubernetes
network policies:</p><ul><li>Isolate multi-tenant deployments</li><li>Regulatory compliance</li><li>Ensure containers assigned to different environments (e.g. dev/staging/prod) cannot interfere with each another</li></ul><img src=../blog/2018_week_09/blog-namespaceisolation.png title=logo width=100% class="drop-shadow reveal-fast"><p>..read on <a href=/howto/networkisolation>Namespace Isolation</a> how to configure it.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Namespace Scope<a href=/blog/2018_week_08_2/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Namespace Scope" data-url=https://gardener.cloud/blog/2018_week_08_2/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2018_week_08_2/></script></div><p><p><strong>Should I use:</strong></p><ul style=list-style:none><li>❌ one namespace per user/developer?</li><li>❌ one namespace per team?</li><li>❌ one per service type?</li><li>❌ one namespace per application type?</li><li>😄 <b>one namespace per running instance of your application?</b></li></ul><p><strong>Apply the <a href=https://en.wikipedia.org/wiki/Principle_of_least_privilege>Principle of Least Privilege</a></strong></p><p>All user accounts should run at all times <strong>as few privileges as possible</strong>, and also
launch applications with as few privileges as possible. If you share a cluster for
different user separated by a <code>namespace</code>, <strong>all user has access to all <code>namespaces</code></strong> and
services per default. It can happen that a user <strong>accidentally uses and destroys</strong> the
<code>namespace</code> of a productive application or the <code>namespace</code> of another developer.</p><p><strong>Keep in mind: By default namespaces don&rsquo;t provide:</strong></p><ul><li>Network isolation</li><li>Access Control</li><li>Audit Logging on user level</li></ul></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>ReadWriteMany - Dynamically Provisioned Persistent Volumes Using Amazon EFS<a href=/blog/2018_week_27/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="ReadWriteMany - Dynamically Provisioned Persistent Volumes Using Amazon EFS" data-url=https://gardener.cloud/blog/2018_week_27/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2018_week_27/></script></div><p><p>The efs-provisioner allows you to mount EFS storage as PersistentVolumes in kubernetes. It consists of a container
that has access to an AWS EFS resource. The container reads a configmap containing the EFS filesystem ID, the
AWS region and the name identifying the efs-provisioner. This name will be used later when you create a
storage class.</p><img src=../blog/2018_week_27/blog-aws-efs.png title=overview width=100% class="drop-shadow reveal-fast"><h2 id=why-efs>Why EFS</h2><ol><li>When you have application running on multiple nodes which require shared access to a file system</li><li>When you have an application that requires multiple virtual machines to access the same file system at the same time,
AWS EFS is a tool that you can use.</li><li>EFS supports encryption.</li><li>EFS is SSD based storage and its storage capacity and pricing will scale in or out as needed, so there is no need
for the system administrator to do additional operations. It can grow to a petabyte scale.</li><li>EFS now supports NFSv4 lock upgrading and downgrading, so yes, you can use sqlite with EFS… even if it was possible
before.</li><li>Easy to setup</li></ol><h2 id=why-not-efs>Why Not EFS</h2><ol><li>Sometimes when you think about using a service like EFS, you may also think about <strong>vendor lock-in</strong> and its negative sides</li><li>Making an EFS backup may decrease your production FS performance; the throughput used by backup counts towards
your total file system throughput.</li><li>EFS is expensive compared to EBS (roughly twice the price of EBS storage)</li><li>EFS is not the magical solution for all your distributed FS problems, it can be slow in many cases. Test, benchmark
and measure to ensure your if EFS is a good solution for your use case.</li><li>EFS distributed architecture results in a latency overhead for each file read/write operation.</li><li>If you have the possibility to use a CDN, don’t use EFS, use it for the files which can&rsquo;t be stored in a CDN.</li><li>Don’t use EFS as a caching system, sometimes you could be doing this unintentionally.</li><li>Last but not least, even if EFS is a fully managed NFS, you will face performance problems in many cases,
resolving them takes time and needs effort.</li></ol><p>..read some more on <a href=../readmore/readwritemany>ReadWriteMany</a>.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Shared storage with S3 backend<a href=/blog/2018_week_10/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Shared storage with S3 backend" data-url=https://gardener.cloud/blog/2018_week_10/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2018_week_10/></script></div><p><p>The storage is definitely the most complex and important part of an application setup, once this part is completed,
one of the most problematic parts could be solved.</p><p>Mounting a S3 bucket into a pod using <a href=https://github.com/libfuse/libfuse>FUSE</a> allows to access data stored in S3 via
the filesystem. The mount is a pointer to an S3 location, so the data is never synced locally. Once mounted, any pod
can read or even write from that directory without the need for explicit keys.</p><img src=../blog/2018_week_10/blog-s3-shared-storage.png title=logo width=100% class="drop-shadow reveal-fast"><p>However, it can be used to import and parse large amounts of data into a database.</p><p>..read on <a href=../app/s3>Shared S3 Storage</a> how to configure it.</p></p></div></div></article><article class="post row" data-path><div class=wrapper><div class="two columns"><ul class=authors><a href=mailto:andreas.herz@sap.com><img class=user-icon src="https://avatars1.githubusercontent.com/u/1155039?v=4" title="Andreas Herz"></a></ul><span class=publishdate data-publishdate=2018-06-11>2018-06-11</span></div><div class="ten columns"><h2>Watching logs of several pods<a href=/blog/2018_week_08/ class="title-link clipboard-copy"><i class="fa fa-link"></i></a></h2><div class=share-ribbon><a href="https://twitter.com/share?ref_src=twsrc%5Etfw" class=twitter-share-button data-text="Watching logs of several pods" data-url=https://gardener.cloud/blog/2018_week_08/ data-hashtags=GardenerProject data-dnt=true data-show-count=false>Tweet</a><script async src=https://platform.twitter.com/widgets.js></script>
<script type=in/share data-url=https://gardener.cloud/blog/2018_week_08/></script></div><p><p>One thing that always bothered me was that I couldn&rsquo;t get logs of several pods at once with <code>kubectl</code>. A simple
<code>tail -f &lt;path-to-logfile></code> isn&rsquo;t possible. Certainly you can use <code>kubectl logs -f &lt;pod-id></code>, but it doesn&rsquo;t
help if you want to monitor more than one pod at a time.</p><p>This is something you really need a lot, at least if you run several instances of a pod behind a <code>deployment</code>
and you don&rsquo;t have setup a log viewer service like Kibana.</p><img src=../blog/2018_week_08/blog-kubetail.png title=logo width=100% class="drop-shadow reveal-fast"><p>kubetail comes to the rescue, it is a small bash script that allows you to aggregate log files of several pods at
the same time in a simple way. The script is called <code>kubetail</code> and is available at
<a href=https://github.com/johanhaleby/kubetail>GitHub</a>.</p></p></div></div></article></div></div></div></section></div><style></style><footer class=footer><div class="container footer-wrapper"><ul class=nav><li><a href=/blog/>Blogs</a></li><li><a href=/news/>News</a></li><li><a href=/community/>Community</a></li><li><a href=/adopter/>Adopters</a></li><li><a href=/documentation/home>Documentation</a></li></ul><img src=/images/lp/gardener-logo.svg alt="Logo Gardener" class=logo><ul class=media-wr><li><a target=_blank href=https://kubernetes.slack.com/archives/CB57N0BFG><img src=/images/branding/slack-logo-white.svg class=media-icon><div class=media-text>Slack</div></a></li><li><a target=_blank href=https://github.com/gardener><img src=/images/branding/github-mark-logo.png class=media-icon><div class=media-text>GitHub</div></a></li><li><a target=_blank href=https://www.youtube.com/channel/UCwUhwKFREV8Su0gwAJQX7tw><img src=/images/branding/youtube-logo-dark.svg class=media-icon><div class=media-text>YouTube</div></a></li><li><a target=_blank href=https://twitter.com/GardenerProject><img src=/images/branding/twitter-logo-white.svg class=media-icon><div class=media-text>Twitter</div></a></li></ul><span class=copyright>Copyright 2020 Gardener project authors. Privacy Statement</span></div></footer><script src=/js/perfect-scrollbar.min.js?1592577037></script><script src=/js/perfect-scrollbar.jquery.min.js?1592577037></script><script src=/js/jquery.sticky.js?1592577037></script><script src=/js/featherlight.min.js?1592577037></script><script src=/js/html5shiv-printshiv.min.js?1592577037></script><script src=/js/modernizr.custom.71422.js?1592577037></script><link href=/mermaid/mermaid.css?1592577037 type=text/css rel=stylesheet><script src=/mermaid/mermaid.js?1592577037></script><script src=/js/code-snippets.js?1592577037></script><script>mermaid.initialize({startOnLoad:true,htmlLables:true});function createIssue(issueUrl,page,url){var uri=issueUrl+"?title=Documentation issue on page \""+page+"\"";uri=uri+"&body=\n\n<- DESCRIBE MISSING OR FAULTY DOCUMENTATION HERE->\n\n---\nPage: ["+page+"]("+
url+")\ndon't remove the link to the page. It's required for the processor"
var res=encodeURI(uri);res+="&labels=area/documentation"
window.open(res,"issue")
return false;}
$(document).ready(function(){inlineSVG.init();$("[data-publishdate]").each(function(){$(this).text(moment($(this,"YYYY-MM-DD","YYYY-MM-DD hh:mm:ss").attr("data-publishdate")).fromNow());});new ClipboardJS('.clipboard-copy');$("body").codeSnippets();});</script><noscript><iframe src="https://www.googletagmanager.com/ns.html?id=GTM-W2FGNSX" height=0 width=0 style=display:none;visibility:hidden></iframe></noscript><script src=/js/modernizr.custom.min.js></script><script src=/js/jsrender.min.js></script><script src=/js/main.js></script><script>$(document).ready(function(){$('.blogs .clipboard-copy').click(function(e){e.preventDefault();});})</script></body></html>