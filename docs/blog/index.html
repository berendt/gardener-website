<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <title>Kubernetes Gardener</title>

    <link rel="icon" type="image/x-icon" href="/images/favicon.ico">
    <link rel="icon" type="image/png"    href="/images/favicon-32x32.png" sizes="32x32">
    <link rel="icon" type="image/png"    href="/images/favicon-16x16.png" sizes="16x16">

    <link rel="stylesheet" href="/css/fontawesome-all.min.css" >
    <link rel="stylesheet" href="/css/skeleton.css">
    <link rel="stylesheet" href="/css/main.css">

    
    <link rel="stylesheet" href="https://gardener.cloud/sass/blog.min.bd660d79a52ad74ac9d2a11f4d6220c0a7c13e8f059455bc57292d20af698c08.css">

    <meta name="viewport" content="width=device-width, initial-scale=1">


    <script src="/js/jquery.min.js"></script>
    <script src="/js/moment.js"></script>
</head>
<body id="landingpage"  style="background-color: #dfe9f8;">

<nav id="toolbar">
    <div class="branding">
        <div class="branding-teaser">
            <img class="u-max-full-width svg" height="45px" src="/images/logo.svg">
            <span>Gardener</span>
        </div>
            <div class="menu">
                <div class="hidden-items">
                    <div>
                        <a href="https://twitter.com/intent/tweet?source=http%3A%2F%2Fgardener.cloud&text=Universal%20Kubernetes%20at%20Scale:%20http%3A%2F%2Fgardener.cloud" target="_blank" title="Tweet" class="documentation-button" >
                           <i class="fab fa-twitter-square fa-2x" aria-hidden="true"></i>
                        </a>
                    </div>

                    <div>
                        <a href="http://www.linkedin.com/shareArticle?mini=true&url=http%3A%2F%2Fgardener.cloud&title=Universal%20Kubernetes%20at%20Scale&summary=Create%20and%20manage%20thousands%20of%20kubernetes%20clusters%20on%20any%20hyperscaler.&source=http%3A%2F%2Fgardener.cloud" target="_blank"  class="documentation-button">
                            <i class="fab fa-linkedin fa-2x" aria-hidden="true"></i>
                        </a>
                    </div>
                    <div>
                        <a href="http://wordpress.com/press-this.php?u=http%3A%2F%2Fgardener.cloud&quote=Universal%20Kubernetes%20at%20Scale&s=Create%20and%20manage%20thousands%20of%20kubernetes%20clusters%20on%20any%20hyperscaler." target="_blank"  class="documentation-button">
                            <i class="fab fa-wordpress fa-2x" aria-hidden="true"></i>
                        </a>
                    </div>

                    <div>
                        <a href="mailto:?subject=Universal%20Kubernetes%20at%20Scale&body=Create%20and%20manage%20thousands%20of%20kubernetes%20clusters%20on%20any%20hyperscaler.:%20http%3A%2F%2Fgardener.cloud" target="_blank"  class="documentation-button">
                            <i class="fas fa-envelope-square fa-2x" aria-hidden="true"></i>
                        </a>
                    </div>


                    <div  id="hide-share-menu">
                        <i class="fa fa-times"></i>
                    </div>

                </div>
                <div class="menu-items active">
                    <div  >
                        <a href="/"  class="documentation-button" >
                            About
                        </a>
                    </div>

                    <div  >
                        <a href="/adopter"  class="documentation-button">
                            Adopter
                        </a>
                    </div>


                    <div  >
                        <a href="/community" class="documentation-button">
                            Community
                        </a>
                    </div>

                    <div  class='current_page_item'  >
                        <a href="/blog" class="documentation-button">
                            Blog
                        </a>
                    </div>

                    <div>
                        <a href="/tutorials" class="documentation-button">
                            Docs
                        </a>
                    </div>


                    <div  id="show-share-menu">
                        <i class="fa fa-share-alt"></i>
                    </div>

                    <div class='menu-line'></div>
                </div>
                <a class="toggle-nav active" href="#">☰</a>
            </div>
    </div>
</nav>

<div class="blogs">
        
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Feature Flags in Kubernetes Applications</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="3b3f61b3ba369f3a79c52f3e3c8b43c2"></span>
   <script>$("#3b3f61b3ba369f3a79c52f3e3c8b43c2").html(moment("2019-06-11T15:39:51Z").fromNow())</script>


</span> by 


   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        <p>Feature flags are used to change the behavior of a program at runtime without forcing a restart.</p>

<p>Although they are essential in a native cloud environment, they cannot be implemented without significant
effort on some platforms. Kubernetes has made this trivial. Here we will implement them through labels and
annotations, but you can also implement them by connecting directly to the Kubernetes API Server.</p>



    <img src="../blog/2019_week_21_2/teaser.gif" title="overview" width="100%" class="drop-shadow reveal-fast" style="visibility:hidden"/>



<p>Possible Use Cases
 - turn on/off a specific instance
 - turn on/off profiling of a specific instance
 - change the logging level, to capture detailed logs during a specific event
 - change caching strategy at runtime
 - change timeouts in production
 - toggle on/off some special verification</p>

<p>..read some more on <a href="../readmore/featureflag">Feature Flags for App</a>.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Cluster Overprovisioning</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="5d434811bd0e7a1072176e52f2348a5d"></span>
   <script>$("#5d434811bd0e7a1072176e52f2348a5d").html(moment("2019-06-12T10:54:54Z").fromNow())</script>


</span> by 


   

   

<a href='mailto:andreas.herz@sap.com'>Herz, Andreas</a>, <a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        <p>This tutorial describes how to overprovisioning of cluster nodes for scaling and failover. This is desired
when you have work load that need to scale up quickly without waiting for the new cluster nodes to be created
and join the cluster.</p>



    <img src="../blog/2019_week_21/teaser.png" title="overview" width="100%" class="drop-shadow reveal-fast" style="visibility:hidden"/>



<p>A similar problem occurs when crashing a node from the Hyperscaler. This must be replaced by Kubernetes as fast
as possible. The solution can be <strong>overprovisioning</strong> of nodes</p>

<p>..read some more on <a href="../readmore/overprovisioning">Cluster Overprovisioning</a>.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Manually adding a node to an existing cluster</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="177f9c5c444ce7191832e020a1ed2d5e"></span>
   <script>$("#177f9c5c444ce7191832e020a1ed2d5e").html(moment("2019-06-12T10:54:54Z").fromNow())</script>


</span> by 


   

   

<a href='mailto:andreas.herz@sap.com'>Herz, Andreas</a>, <a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        <p>Gardener has an excellent ability to <a href="/components/mcm/">automatically scale machines</a> for the cluster. From the point of view
of scalability, there is <strong>no need for manual intervention</strong>.</p>



    <object type="image/svg+xml" data="../blog/2019_week_06/teaser.svg" style="margin: 3rem auto;display: block;" class="drop-shadow"></object>



<p>This tutorial is useful for those end-users who need specifically configured nodes, which are not yet supported
by Gardener. For example: an end-user who wants some workload that requires <code>runnc</code> instead of <code>runc</code> as container
runtime.</p>

<p>..read some more on <a href="../readmore/adding-nodes">Adding Nodes to a Cluster</a>.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Organizing Access Using kubeconfig Files</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="8fe605dd09115194f1a5b3e6eac812fb"></span>
   <script>$("#8fe605dd09115194f1a5b3e6eac812fb").html(moment("2019-06-12T10:54:54Z").fromNow())</script>


</span> by 


   

   

<a href='mailto:andreas.herz@sap.com'>Herz, Andreas</a>, <a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        <p>The kubectl command-line tool uses <code>kubeconfig</code> files to find the information it needs to choose a cluster and
communicate with the API server of a cluster.</p>



    <object type="image/svg+xml" data="../blog/2019_week_02/teaser.svg" style="margin: 3rem auto;display: block;" class="drop-shadow"></object>



<blockquote>
<p>What happens if your kubeconfig file of your production cluster is leaked or published by accident?</p>
</blockquote>

<p>Since there is no possibility to rotate or revoke the initial kubeconfig, there is only one
way to protect your infrastructure or application if it is has leaked - <strong>delete the cluster</strong>.</p>

<p>..learn more on <a href="../readmore/working-with-kubeconfig">Work with kubeconfig files</a>.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Cookies are dangerous...</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="269af3ccd4eedcfa3ef2e519895a6deb"></span>
   <script>$("#269af3ccd4eedcfa3ef2e519895a6deb").html(moment("2019-06-11T15:39:51Z").fromNow())</script>


</span> by 


   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        <p><strong>&hellip;they mess up the figure.</strong></p>



    <img src="../blog/2018_week_51/cookie.jpg" title="overview" width="100%" class="drop-shadow reveal-fast" style="visibility:hidden"/>



<p>For a team event during the Christmas season we decided to completely reinterpret the
topic <code>cookies</code>&hellip; since the vegetables have gone on a well-deserved vacation. :-)</p>

<p>Get recipe on <a href="../readmore/cookies">Gardener Cookies</a>.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Hardening the Gardener Community Setup</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="a554b87aff27b0b1459aca257625b09f"></span>
   <script>$("#a554b87aff27b0b1459aca257625b09f").html(moment("2019-06-11T15:39:51Z").fromNow())</script>


</span> by 


   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        <p>The <a href="https://github.com/gardener/gardener">Gardener project team</a> has analyzed the impact of the
Gardener <a href="https://groups.google.com/forum/#!topic/gardener/Pom2Y70cDpw">CVE-2018-2475</a> and
the <a href="https://groups.google.com/forum/#!topic/kubernetes-announce/GVllWCg6L88">Kubernetes CVE-2018-1002105</a> on
the Gardener Community Setup. Following some recommendations it is possible to mitigate both vulnerabilities.</p>

<p>Read more on <a href="../readmore/hardening">Hardening the Gardener Community Setup</a>.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Auditing Kubernetes for Secure Setup</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="a2fadbe9bad3a3f4a048825788f2e5a2"></span>
   <script>$("#a2fadbe9bad3a3f4a048825788f2e5a2").html(moment("2019-06-11T15:39:51Z").fromNow())</script>


</span> by 


   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        <p>In summer 2018, the <a href="https://github.com/gardener/gardener">Gardener project team</a> asked <a href="https://kinvolk.io/">Kinvolk</a> to execute several penetration tests in its role as third-party contractor. The goal of this ongoing work is to increase the security of
all Gardener stakeholders in the open source community. Following the Gardener architecture, the control plane of a
Gardener managed shoot cluster resides in the corresponding seed cluster. This is a
<a href="https://kubernetes.io/blog/2018/05/17/gardener/#kubernetes-control-plane">Control-Plane-as-a-Service</a> with
a <a href="https://kubernetes.io/blog/2018/05/17/gardener/#network-air-gap">network air gap</a>.</p>



    <object type="image/svg+xml" data="../blog/2018_week_46/teaser.svg" style="margin: 3rem auto;display: block;" class="drop-shadow"></object>



<p>Along the way we found various kinds of security issues, for example, due to misconfiguration or missing isolation,
as well as two special problems with upstream Kubernetes and its Control-Plane-as-a-Service
architecture.</p>

<p>..read some more on <a href="../readmore/insecure">Auditing Kubernetes for Secure Setup</a>.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Hibernate a Cluster to save money</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="fb9315adf8cf597d9309c3315f636834"></span>
   <script>$("#fb9315adf8cf597d9309c3315f636834").html(moment("2019-06-11T15:39:51Z").fromNow())</script>


</span> by 


   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        <p>You want to experiment with Kubernetes or have set up a customer scenario, but you don&rsquo;t want to run the
cluster 24 / 7 for reasons of cost?</p>



    <object type="image/svg+xml" data="../blog/2018_week_40/teaser_patched.svg" style="margin: 3rem auto;display: block;" class="drop-shadow"></object>



<p>The Gardener gives you the possibility to scale your cluster down to <strong>zero nodes</strong>.</p>

<p>..read some more on <a href="../readmore/hibernate">Hibernate a Cluster</a>.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>ReadWriteMany - Dynamically Provisioned Persistent Volumes Using Amazon EFS</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="c45c43c62f8aae0c473eebb8de4f3fc0"></span>
   <script>$("#c45c43c62f8aae0c473eebb8de4f3fc0").html(moment("2019-06-11T15:39:51Z").fromNow())</script>


</span> by 


   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        

<p>The efs-provisioner allows you to mount EFS storage as PersistentVolumes in kubernetes. It consists of a container
that has access to an AWS EFS resource. The container reads a configmap containing the EFS filesystem ID, the
AWS region and the name identifying the efs-provisioner. This name will be used later when you create a
storage class.</p>



    <img src="../blog/2018_week_27/blog-aws-efs.png" title="overview" width="100%" class="drop-shadow reveal-fast" style="visibility:hidden"/>



<h2 id="why-efs">Why EFS</h2>

<ol>
<li>When you have application running on multiple nodes which require shared access to a file system</li>
<li>When you have an application that requires multiple virtual machines to access the same file system at the same time,
AWS EFS is a tool that you can use.</li>
<li>EFS supports encryption.</li>
<li>EFS is SSD based storage and its storage capacity and pricing will scale in or out as needed, so there is no need
for the system administrator to do additional operations. It can grow to a petabyte scale.</li>
<li>EFS now supports NFSv4 lock upgrading and downgrading, so yes, you can use sqlite with EFS… even if it was possible
before.</li>
<li>Easy to setup</li>
</ol>

<h2 id="why-not-efs">Why Not EFS</h2>

<ol>
<li>Sometimes when you think about using a service like EFS, you may also think about <strong>vendor lock-in</strong> and its negative sides</li>
<li>Making an EFS backup may decrease your production FS performance; the throughput used by backup counts towards
your total file system throughput.</li>
<li>EFS is expensive compared to EBS (roughly twice the price of EBS storage)</li>
<li>EFS is not the magical solution for all your distributed FS problems, it can be slow in many cases. Test, benchmark
and measure to ensure your if EFS is a good solution for your use case.</li>
<li>EFS distributed architecture results in a latency overhead for each file read/write operation.</li>
<li>If you have the possibility to use a CDN, don’t use EFS, use it for the files which can&rsquo;t be stored in a CDN.</li>
<li>Don’t use EFS as a caching system, sometimes you could be doing this unintentionally.</li>
<li>Last but not least, even if EFS is a fully managed NFS, you will face performance problems in many cases,
resolving them takes time and needs effort.
<br /></li>
</ol>

<p>..read some more on <a href="../readmore/readwritemany">ReadWriteMany</a>.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Anti Patterns</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="6fa774e2fd1f6a7eafdbf40643b09931"></span>
   <script>$("#6fa774e2fd1f6a7eafdbf40643b09931").html(moment("2019-06-11T15:48:40Z").fromNow())</script>


</span> by 


   

   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        



    <img src="../blog/2018_week_22/blog-antipattern.png" title="logo" width="100%" class="drop-shadow reveal-fast" style="visibility:hidden"/>



<h2 id="running-as-root-user">Running as root user</h2>

<p>Whenever possible, do not run containers as root users. One could be
tempted to say that Kubernetes Pods and Node are well separated. The host and the container
share the same kernel. If the container is compromised, a root user can damage the underlying
node. Use <code>RUN groupadd -r anygroup &amp;&amp; useradd -r -g anygroup myuser</code> to create a group
and a user in it. Use the <code>USER</code> command to switch to this user.</p>

<h2 id="storing-data-or-logs-in-containers">Storing data or logs in containers</h2>

<p>Containers are ideal for stateless applications
and should be transient. This means that no data or logs should be stored in the
container, as they are lost when the container is closed. If absolutely necessary,
you can use persistence volumes instead to persist them outside the containers.
However, an ELK stack is preferred for storing and processing log files.</p>

<p>..read some more on <a href="../readmore/antipattern">Common Kubernetes Antipattern</a>.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Frontend HTTPS</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="06ac0806609a247e53c7a10299e06b07"></span>
   <script>$("#06ac0806609a247e53c7a10299e06b07").html(moment("2019-06-11T15:39:51Z").fromNow())</script>


</span> by 


   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        

    <img src="../blog/2018_week_17/blog-https.png" title="logo" width="100%" class="drop-shadow reveal-fast" style="visibility:hidden"/>



<p>For encrypted communication between the client to the load balancer, you need to specify a TLS private key and
certificate to be used by the ingress controller.</p>

<p>Create a secret in the namespace of the ingress containing the TLS private key and certificate. Then configure the
secret name in the TLS configuration section of the ingress specification.</p>

<p>..read on <a href="../readmore/https">HTTPS - Self Signed Certificates</a> how to configure it.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Shared storage with S3 backend</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="f7129c08a995ddb875b480c358821ab6"></span>
   <script>$("#f7129c08a995ddb875b480c358821ab6").html(moment("2019-06-11T15:39:51Z").fromNow())</script>


</span> by 


   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        <p>The storage is definitely the most complex and important part of an application setup, once this part is completed,
one of the most problematic parts could be solved.</p>

<p>Mounting a S3 bucket into a pod using <a href="https://github.com/libfuse/libfuse">FUSE</a> allows to access data stored in S3 via
the filesystem. The mount is a pointer to an S3 location, so the data is never synced locally. Once mounted, any pod
can read or even write from that directory without the need for explicit keys.</p>



    <img src="../blog/2018_week_10/blog-s3-shared-storage.png" title="logo" width="100%" class="drop-shadow reveal-fast" style="visibility:hidden"/>



<p>However, it can be used to import and parse large amounts of data into a database.</p>

<p>..read on <a href="/app/s3">Shared S3 Storage</a> how to configure it.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Namespace Isolation</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="4de13540282b30474b97e3c603ead71b"></span>
   <script>$("#4de13540282b30474b97e3c603ead71b").html(moment("2019-06-11T15:39:51Z").fromNow())</script>


</span> by 


   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        <p>&hellip;or <strong>DENY all traffic from other namespaces</strong></p>

<p>You can configure a <strong>NetworkPolicy</strong> to deny all traffic from other namespaces while allowing all traffic
coming from the same namespace the pod is deployed to. There are many reasons why you may chose to configure Kubernetes
network policies:
 - Isolate multi-tenant deployments
 - Regulatory compliance
 - Ensure containers assigned to different environments (e.g. dev/staging/prod) cannot interfere with each another</p>



    <img src="../blog/2018_week_09/blog-namespaceisolation.png" title="logo" width="100%" class="drop-shadow reveal-fast" style="visibility:hidden"/>



<p>..read on <a href="/howto/networkisolation">Namespace Isolation</a> how to configure it.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Namespace Scope</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="b44a1637bba9d40a7b3dd6f1dd9b58a7"></span>
   <script>$("#b44a1637bba9d40a7b3dd6f1dd9b58a7").html(moment("2019-06-11T15:39:51Z").fromNow())</script>


</span> by 


   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        <p><strong>Should I use:</strong>
<ul style="list-style:none">
    <li>❌ one namespace per user/developer?</li>
    <li>❌ one namespace per team?</li>
    <li>❌ one per service type?</li>
    <li>❌ one namespace per application type?</li>
    <li>😄 <b>one namespace per running instance of your application?</b></li>
</ul></p>

<p><strong>Apply the <a href="https://en.wikipedia.org/wiki/Principle_of_least_privilege">Principle of Least Privilege</a></strong></p>

<p>All user accounts should run at all times <strong>as few privileges as possible</strong>, and also
launch applications with as few privileges as possible. If you share a cluster for
different user separated by a <code>namespace</code>, <strong>all user has access to all <code>namespaces</code></strong> and
services per default. It can happen that a user <strong>accidentally uses and destroys</strong> the
<code>namespace</code> of a productive application or the <code>namespace</code> of another developer.</p>

<p><strong>Keep in mind: By default namespaces don&rsquo;t provide:</strong>
 - Network isolation
 - Access Control
 - Audit Logging on user level</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Watching logs of several pods</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="481145967e49688845a0131d632e5ad1"></span>
   <script>$("#481145967e49688845a0131d632e5ad1").html(moment("2019-06-11T15:39:51Z").fromNow())</script>


</span> by 


   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        <p>One thing that always bothered me was that I couldn&rsquo;t get logs of several pods at once with <code>kubectl</code>. A simple
<code>tail -f &lt;path-to-logfile&gt;</code> isn&rsquo;t possible. Certainly you can use <code>kubectl logs -f &lt;pod-id&gt;</code>, but it doesn&rsquo;t
help if you want to monitor more than one pod at a time.</p>

<p>This is something you really need a lot, at least if you run several instances of a pod behind a <code>deployment</code>
and you don&rsquo;t have setup a log viewer service like Kibana.</p>



    <img src="../blog/2018_week_08/blog-kubetail.png" title="logo" width="100%" class="drop-shadow reveal-fast" style="visibility:hidden"/>



<p>kubetail comes to the rescue, it is a small bash script that allows you to aggregate log files of several pods at
the same time in a simple way. The script is called <code>kubetail</code> and is available at
<a href="https://github.com/johanhaleby/kubetail">https://github.com/johanhaleby/kubetail</a>.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Big things come in small packages</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="0dbcaf3c9a61b8f6441bb20e38e1ac7c"></span>
   <script>$("#0dbcaf3c9a61b8f6441bb20e38e1ac7c").html(moment("2019-06-11T15:39:51Z").fromNow())</script>


</span> by 


   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        

<p>Microservices tend to use smaller runtimes but you can <strong>use what you have</strong> today - and this can be
a <strong>problem in kubernetes</strong>.</p>

<p>Switching your architecture from a monolith to microservices has many advantages, both in the
way you write software and the way it is used throughout its lifecycle. In this post, my attempt is to
cover one problem which does not get as much attention and discussion - <strong>size of the technology stack</strong>.</p>

<h2 id="general-purpose-technology-stack">General purpose technology stack</h2>



    <img src="../blog/2018_week_07/blog-service-common-stack.png" title="logo" width="100%" class="drop-shadow reveal-fast" style="visibility:hidden"/>



<p>There is a tendency to be more generalized in development and to apply this pattern to all services. One feels
that a homogeneous image of the technology stack is good if it is the same for all services.</p>

<p>One forgets, however, that a large percentage of the integrated infrastructure is not used by all services in
the same way, and is therefore only a burden. Thus, resources are wasted and the entire application becomes
expensive in operation and scales very badly.</p>

<h2 id="light-technology-stack">Light technology stack</h2>

<p>Due to the lightweight nature of your service, you can run more containers on a physical server and virtual
machines. The result is higher resource utilization.</p>



    <img src="../blog/2018_week_07/blog-service-service-stack.png" title="logo" width="100%" class="drop-shadow reveal-fast" style="visibility:hidden"/>



<p>Additionally, microservices are developed and deployed as containers independently of each another. This means that a development
team can develop, optimize and deploy a microservice without impacting other subsystems.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2>Kubernetes is available in Docker for Mac 17.12 CE</h2>
                    <h3><div class="last-update">Updated <span>


   <span id="2f5bcf1833738e1cc7e5e225d048fb0f"></span>
   <script>$("#2f5bcf1833738e1cc7e5e225d048fb0f").html(moment("2019-06-11T15:39:51Z").fromNow())</script>


</span> by 


   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        <p><table style="border:0">
<tr>
    <td>
        

    <img src="../blog/2018_week_06/blog-kubernetes-enable.png" title="logo" width="100%" class="drop-shadow reveal-fast" style="visibility:hidden"/>


    </td>
    <td valign="top">
        <div>
        <b>Kubernetes is only available in Docker for Mac 17.12 CE and higher</b> on the Edge channel. Kubernetes
        support is not included in Docker for Mac Stable releases. To find out more about Stable and Edge channels
        and how to switch between them, see
        <a href="https://docs.docker.com/docker-for-mac/#general">general configuration</a>.
        </div>
    </td>
</tr><br />
</table>
Docker for Mac 17.12 CE (and higher) Edge includes a standalone Kubernetes server that runs on Mac,
so that you can test deploying your Docker workloads on Kubernetes.</p>

<p>The Kubernetes client command, kubectl, is included and configured to connect to the local Kubernetes server.
If you have kubectl already installed and pointing to some other environment, such as minikube or a GKE cluster,
be sure to change context so that kubectl is pointing to docker-for-desktop:</p>

<p>&hellip;see more on <a href="https://docs.docker.com/docker-for-mac/#kubernetes">Docker.com</a></p>

<p>I recommend to <a href="/howto/kube-shell">setup your shell</a> to see which KUBECONFIG is active.</p>

                    </p>
                </div>
            </div>
        </article>
        
        <article class="post row" data-path="">
            <div class="wrapper">
                <div class="one column">
                    <img src="https://avatars1.githubusercontent.com/u/1155039?v=4"
                         class="user-icon icons"
                         alt="user-image">
                </div>
                <div class="nine columns">
                    <h2></h2>
                    <h3><div class="last-update">Updated <span>


   <span id="25ac4b5d82f13f5a974ff20fcbd2616a"></span>
   <script>$("#25ac4b5d82f13f5a974ff20fcbd2616a").html(moment("2019-06-11T15:39:51Z").fromNow())</script>


</span> by 


   

<a href='mailto:andreas.herz@sap.com'>Andreas Herz</a>

</div></h3>
                    <p>
                        
                    </p>
                </div>
            </div>
        </article>
        
</div>



<script src="/js/modernizr.custom.min.js"></script>
<script src="/js/ScrollMagic.min.js"></script>
<script src="/js/scrollreveal.js"></script>
<script src="/js/jsrender.min.js"></script>
<script src="/js/main.js"></script>

</body>
</html>
